<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø´ÛŒÙ…ÛŒ Ø§Ù…ÛŒØ±Ú©Ø¨ÛŒØ±</title>
  <meta name="description" content="Ø¬Ø¯ÙˆÙ„ ØªÙ†Ø§ÙˆØ¨ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ø§ Ù…Ø¯Ù„ ÙØ¶Ø§ÛŒÛŒ Ø§ÙˆØ±Ø¨ÛŒØªØ§Ù„â€ŒÙ‡Ø§ØŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÙ†Ø¨Ù„ Û±â€“Û±Û±Û¸ØŒ Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ Ø¬Ø§Ù…Ø¹ (pHØŒ Ù†Ø±Ù†Ø³ØªØŒ Î”H)ØŒ Ø¨Ø§Ù„Ø§Ù†Ø³ Ø®ÙˆØ¯Ú©Ø§Ø± ÙˆØ§Ú©Ù†Ø´â€ŒÙ‡Ø§ØŒ Ù…ÙˆÙ„Ú©ÙˆÙ„â€ŒØ³Ø§Ø² 2D Ùˆ Ù†Ù…Ø§ÛŒØ´ 3DØŒ Ø§Ø³Ù¾Ú©ØªØ±ÙˆØ³Ú©ÙˆÙ¾ÛŒØŒ Ø¨Ø§Ù†Ú© ÙˆØ§Ú©Ù†Ø´â€ŒÙ‡Ø§ØŒ Ø®Ø±ÙˆØ¬ÛŒ PNG/CSVØŒ ØªÙ…Ø±ÛŒÙ† Ùˆ Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒØŒ Ùˆ Ø¢ÙÙ„Ø§ÛŒÙ† â€” Ù‡Ù…Ù‡ Ø¯Ø± ÛŒÚ© ÙØ§ÛŒÙ„." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0c1022; --bg-soft:#141735; --card:#171a3a; --text:#e9ecf7; --muted:#a6afd3;
      --brand:#5ee7ff; --brand-2:#a78bfa; --accent:#ffcb6b; --acid:#ff5f6d; --base:#37ff8b;
      --border:rgba(255,255,255,.09); --shadow:0 10px 28px rgba(0,0,0,.25);
      --grid:40px;
    }
    .light{
      --bg:#f6f8fc; --bg-soft:#ffffff; --card:#ffffff; --text:#0d1020; --muted:#4b5473;
      --brand:#0ea5e9; --brand-2:#7c3aed; --accent:#ea580c; --acid:#ef4444; --base:#16a34a;
      --border:rgba(0,0,0,.08); --shadow:0 10px 20px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Vazirmatn,system-ui,-apple-system,"Segoe UI",Roboto;
      background: radial-gradient(1200px 600px at 8% -12%, #1a1f3f 0%, var(--bg) 45%) fixed;
      color:var(--text); line-height:1.7;
    }
    a{color:var(--brand); text-decoration:none}
    header{position:sticky; top:0; z-index:60; backdrop-filter:blur(12px);
      background:linear-gradient(180deg, rgba(17,20,38,.75), rgba(17,20,38,.4));
      border-bottom:1px solid var(--border);}
    .wrap{max-width:1260px; margin:0 auto; padding:0 16px}
    .nav{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:14px 0}
    .brand{display:flex; align-items:center; gap:12px; font-weight:800}
    .brand .logo{width:36px; height:36px; border-radius:10px;
      background:conic-gradient(from 210deg, var(--brand), var(--brand-2), var(--accent), var(--brand));
      box-shadow:var(--shadow); position:relative}
    .brand .logo::after{content:"AM"; position:absolute; inset:0; display:grid; place-items:center; font-size:.75rem; font-weight:800; color:#fff; mix-blend-mode:plus-lighter}
    .nav ul{display:flex; gap:10px; list-style:none; margin:0; padding:0}
    .nav a{padding:8px 12px; border-radius:10px; border:1px solid transparent}
    .nav a:hover{border-color:var(--border); background:rgba(255,255,255,.06)}
    .tools{display:flex; align-items:center; gap:8px}
    button,input,select,textarea{font-family:inherit; color:inherit; background:var(--card); border:1px solid var(--border); padding:10px 12px; border-radius:10px}
    button{cursor:pointer}
    .btn{background:linear-gradient(135deg, var(--brand) 0%, var(--brand-2) 100%); color:#0b0f1f; font-weight:800; border:none}
    .btn.ghost{background:transparent; color:var(--brand); border:1px solid var(--brand)}
    .hero{padding:46px 0 16px; display:grid; gap:12px}
    .hero h1{font-size:2rem; margin:0}
    .hero p{color:var(--muted); margin:0}
    .kpi{display:flex; gap:10px; flex-wrap:wrap}
    .chip{padding:8px 10px; border-radius:10px; border:1px dashed var(--border); color:var(--muted)}
    .section{padding:22px 0}
    .grid{display:grid; gap:16px; grid-template-columns:repeat(12,1fr)}
    .card{background:linear-gradient(180deg, var(--card), var(--bg-soft)); border:1px solid var(--border); border-radius:16px; padding:16px; box-shadow:var(--shadow)}
    .card h3{margin:0 0 8px; font-size:1.12rem}
    .card p{margin:0 0 12px; color:var(--muted)}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:8px 10px; border-radius:999px; background:rgba(255,255,255,.06); border:1px solid var(--border)}
    .ok{color:var(--base); font-weight:800}
    .warn{color:var(--accent); font-weight:800}
    .bad{color:var(--acid); font-weight:800}
    .info{font-size:.92rem; color:var(--muted)}

    /* Ø¬Ø¯ÙˆÙ„ ØªÙ†Ø§ÙˆØ¨ÛŒ */
    .ptable-wrap{display:grid; grid-template-columns:380px 1fr; gap:16px}
    .ptable-controls{display:grid; gap:10px}
    .ptable{display:grid; grid-template-columns:repeat(18, var(--grid)); gap:6px; padding:10px; background:var(--bg-soft); border:1px solid var(--border); border-radius:12px; overflow:auto; max-height:520px}
    .el{width:var(--grid); height:calc(var(--grid) + 8px); border-radius:10px; border:1px solid var(--border); display:grid; place-items:center; position:relative; font-weight:800; font-size:.9rem; background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01)); transition:.15s transform ease}
    .el:focus{outline:2px solid var(--brand)}
    .el:hover{transform:translateY(-2px); box-shadow:0 8px 18px rgba(0,0,0,.18)}
    .el .num{position:absolute; top:4px; left:6px; font-size:.62rem; color:var(--muted)}
    .el .name{position:absolute; bottom:4px; inset-inline:4px; font-size:.6rem; color:var(--muted); text-align:center}
    .cat-alkali{outline:2px solid var(--acid)} .cat-alkaline{outline:2px solid #ff9f59} .cat-transition{outline:2px solid #69c}
    .cat-post{outline:2px solid #8ad} .cat-metalloid{outline:2px solid #b5e07e} .cat-nonmetal{outline:2px solid var(--base)}
    .cat-halogen{outline:2px solid #e6b800} .cat-noble{outline:2px solid var(--brand)} .cat-lan{outline:2px dashed var(--brand-2)} .cat-act{outline:2px dashed var(--accent)}

    /* Ù¾Ù†Ù„ Ø§ÙˆØ±Ø¨ÛŒØªØ§Ù„â€ŒÙ‡Ø§ */
    #orbitalPanel canvas{width:100%; height:300px; background:linear-gradient(180deg, #0b1022, #0e1228); border-radius:12px; border:1px solid var(--border)}

    /* Ù…ÙˆÙ„Ú©ÙˆÙ„â€ŒØ³Ø§Ø² 2D */
    .mol{background:var(--bg-soft); border:1px solid var(--border); border-radius:12px; padding:10px}
    svg{width:100%; height:280px} .atom{fill:#fff; stroke:var(--border); cursor:pointer} .bond{stroke:#8ab; stroke-width:3} .label{font-size:12px; fill:var(--text); pointer-events:none}

    /* Ø§Ø³Ù¾Ú©ØªØ±ÙˆØ³Ú©ÙˆÙ¾ÛŒ Ùˆ 3D */
    .spec{background:var(--bg-soft); border:1px solid var(--border); border-radius:12px; padding:10px}
    canvas#specCanvas, canvas#mol3dCanvas{width:100%; height:220px; background:linear-gradient(180deg, #0b1022, #0e1228); border-radius:8px}

    /* ÙˆØ§Ú©Ù†Ø´â€ŒÙ†Ù…Ø§ Ùˆ Ø¨Ø§Ù†Ú© */
    .rxn{display:grid; gap:10px}
    .rxn .eq{font-family:ui-monospace,Menlo,Consolas,monospace; background:var(--bg-soft); padding:10px; border-radius:10px; border:1px solid var(--border)}
    .table{width:100%; border-collapse:collapse; margin-top:8px}
    .table th,.table td{border:1px solid var(--border); padding:8px; text-align:center; font-size:.9rem}
    .footer{margin-top:36px; padding:24px 0; border-top:1px solid var(--border); color:var(--muted)}
  
@media (max-width: 900px){
  .ptable-wrap{grid-template-columns:1fr; }
  .ptable-controls{order:2;}
  #ptable-grid{order:1;}
  .grid{grid-template-columns:1fr !important;}
  header .nav ul{display:none;}
}
@media (max-width:600px){
  .el{transform:scale(.85); }
  :root{ --grid:32px; }
}

</style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <div>Ø´ÛŒÙ…ÛŒ Ø§Ù…ÛŒØ±Ú©Ø¨ÛŒØ±</div>
          <small style="color:var(--muted)">Ø§Ø«Ø± ØªÛŒÙ… Ø¢Ø±ÛŒâ€ŒÙ…Ø§Ù†Ø¯ â€” ÛŒÚ© ÙØ§ÛŒÙ„ØŒ ÛŒÚ© Ø¯Ù†ÛŒØ§</small>
        </div>
      </div>
      <ul>
        <li><a href="#ptable">Ø¬Ø¯ÙˆÙ„ ØªÙ†Ø§ÙˆØ¨ÛŒ</a></li>
        <li><a href="#lab">Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡</a></li>
        <li><a href="#mol">Ù…ÙˆÙ„Ú©ÙˆÙ„â€ŒÙ‡Ø§</a></li>
        <li><a href="#spec">Ø·ÛŒÙ Ùˆ 3D</a></li>
        <li><a href="#rxn">ÙˆØ§Ú©Ù†Ø´â€ŒÙ†Ù…Ø§</a></li>
        <li><a href="#bank">Ø¨Ø§Ù†Ú© ÙˆØ§Ú©Ù†Ø´â€ŒÙ‡Ø§</a></li>
        <li><a href="#about">Ø¯Ø±Ø¨Ø§Ø±Ù‡</a></li>
      </ul>
      <div class="tools">
        <div id="scorePill" class="pill">Ø§Ù…ØªÛŒØ§Ø²: 0</div>
        <button id="theme" class="btn ghost">Ø­Ø§Ù„Øª Ø±ÙˆØ²/Ø´Ø¨</button>
        <a class="btn" href="#lab">Ø´Ø±ÙˆØ¹ Ø³Ø±ÛŒØ¹</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <h1>Ø¬Ø¯ÙˆÙ„ Û±â€“Û±Û±Û¸ Ø¨Ø§ Ù…Ø¯Ù„ ÙØ¶Ø§ÛŒÛŒ Ø§ÙˆØ±Ø¨ÛŒØªØ§Ù„â€ŒÙ‡Ø§ + Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ Ú©Ø§Ù…Ù„</h1>
      <p>ÛŒÚ©â€ŒØ¬Ø§: Ø¬Ø¯ÙˆÙ„ØŒ Ø§ÙˆØ±Ø¨ÛŒØªØ§Ù„â€ŒÙ‡Ø§ Ø¨Ø§ Ù‚Ø§Ø¹Ø¯Ù‡â€ŒÛŒ Ù‡Ø§Ù†Ø¯ØŒ pHØŒ Ù†Ø±Ù†Ø³ØªØŒ Î”HØŒ Ø¨Ø§Ù„Ø§Ù†Ø³ØŒ 2D/3D Ù…ÙˆÙ„Ú©ÙˆÙ„ØŒ Ø·ÛŒÙØŒ Ø¨Ø§Ù†Ú© ÙˆØ§Ú©Ù†Ø´â€ŒÙ‡Ø§ØŒ Ø®Ø±ÙˆØ¬ÛŒ PNG/CSVØŒ ØªÙ…Ø±ÛŒÙ† Ùˆ Ø¢ÙÙ„Ø§ÛŒÙ†.</p>
      <div class="kpi">
        <div class="chip">Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÙ†Ø¨Ù„ Ùˆ Ø¨Ù‡ÛŒÙ†Ù‡</div>
        <div class="chip">Ø¨Ø¯ÙˆÙ† Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ø®Ø§Ø±Ø¬ÛŒ</div>
        <div class="chip">Ø¨Ø±Ù†Ø¯ÛŒÙ†Ú¯ Ø¢Ø±ÛŒâ€ŒÙ…Ø§Ù†Ø¯</div>
      </div>
    </section>

    <!-- Ø¬Ø¯ÙˆÙ„ ØªÙ†Ø§ÙˆØ¨ÛŒ + Ù¾Ù†Ù„ Ø®ÙˆØ§Øµ + Ø§ÙˆØ±Ø¨ÛŒØªØ§Ù„â€ŒÙ‡Ø§ -->
    <section id="ptable" class="section card">
      <h3>Ø¬Ø¯ÙˆÙ„ ØªÙ†Ø§ÙˆØ¨ÛŒ Ø²Ù†Ø¯Ù‡ Ø¨Ø§ Ù…Ø¯Ù„ ÙØ¶Ø§ÛŒÛŒ Ø§ÙˆØ±Ø¨ÛŒØªØ§Ù„â€ŒÙ‡Ø§</h3>
      <p class="info">Ø¬Ø³ØªØ¬Ùˆ ÙØ§Ø²ÛŒ Ù†Ù…Ø§Ø¯/Ù†Ø§Ù…/Ø¹Ø¯Ø¯ Ø§ØªÙ…ÛŒØŒ ÙÛŒÙ„ØªØ± Ø¯Ø³ØªÙ‡â€ŒÙ‡Ø§ØŒ Ù¾Ù†Ù„ Ø®ÙˆØ§ØµØŒ Ø§ÛŒØ²ÙˆØªÙˆÙ¾â€ŒÙ‡Ø§ØŒ Ùˆ Ù†Ù…Ø§ÛŒØ´ Ø§ÙˆØ±Ø¨ÛŒØªØ§Ù„â€ŒÙ‡Ø§ (s,p,d,f) Ø¨Ø± Ø§Ø³Ø§Ø³ Z.</p>
      <div class="ptable-wrap">
        <div class="ptable-controls">
          <div class="pill">Ø±Ø§Ù‡Ù†Ù…Ø§: / Ø¨Ø±Ø§ÛŒ ÙÙˆÚ©ÙˆØ³ Ø¬Ø³ØªØ¬Ùˆ. Enter Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨.</div>
          <div style="display:grid; gap:8px">
            <input id="q" placeholder="HØŒ Ù‡ÛŒØ¯Ø±ÙˆÚ˜Ù† ÛŒØ§ 1" />
            <select id="cat">
              <option value="">Ù‡Ù…Ù‡</option>
              <option value="alkali">ÙÙ„Ø²Ø§Øª Ù‚Ù„ÛŒØ§ÛŒÛŒ</option>
              <option value="alkaline">ÙÙ„Ø²Ø§Øª Ù‚Ù„ÛŒØ§ÛŒÛŒ Ø®Ø§Ú©ÛŒ</option>
              <option value="transition">ÙÙ„Ø²Ø§Øª ÙˆØ§Ø³Ø·Ù‡</option>
              <option value="post">ÙÙ„Ø²Ø§Øª Ù¾Ø³â€ŒÙˆØ§Ø³Ø·Ù‡</option>
              <option value="metalloid">Ø´Ø¨Ù‡â€ŒÙÙ„Ø²Ù‡Ø§</option>
              <option value="nonmetal">Ù†Ø§ÙÙ„Ø²Ù‡Ø§</option>
              <option value="halogen">Ù‡Ø§Ù„ÙˆÚ˜Ù†â€ŒÙ‡Ø§</option>
              <option value="noble">Ú¯Ø§Ø²Ù‡Ø§ÛŒ Ù†Ø¬ÛŒØ¨</option>
              <option value="lan">Ù„Ø§Ù†ØªØ§Ù†ÛŒØ¯Ù‡Ø§</option>
              <option value="act">Ø¢Ú©ØªÛŒÙ†ÛŒØ¯Ù‡Ø§</option>
            </select>
            <button id="loadFull" class="btn ghost">Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ø§Ù…Ù„ Ø¬Ø¯ÙˆÙ„ (Û±â€“Û±Û±Û¸)</button>
            <div id="sel" class="pill">Ø¹Ù†ØµØ± Ø§Ù†ØªØ®Ø§Ø¨ÛŒ: â€”</div>

            <div id="props" class="card" style="padding:10px">
              <div><b>Ù†Ù…Ø§Ø¯:</b> <span id="p-symbol">â€”</span></div>
              <div><b>Ù†Ø§Ù…:</b> <span id="p-name">â€”</span></div>
              <div><b>Ø¹Ø¯Ø¯ Ø§ØªÙ…ÛŒ:</b> <span id="p-num">â€”</span></div>
              <div><b>Ø¬Ø±Ù… Ø§ØªÙ…ÛŒ:</b> <span id="p-mass">â€”</span></div>
              <div><b>Ø¯Ø³ØªÙ‡:</b> <span id="p-cat">â€”</span></div>
              <div><b>Ø­Ø§Ù„Øª Ø¯Ø± Û²ÛµÂ°C:</b> <span id="p-state">â€”</span></div>
              <div><b>Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒ:</b> <span id="p-conf">â€”</span></div>
              <div style="display:flex; gap:8px; margin-top:8px">
                <button id="exportIso" class="btn ghost">Ø®Ø±ÙˆØ¬ÛŒ CSV Ø§ÛŒØ²ÙˆØªÙˆÙ¾â€ŒÙ‡Ø§</button>
              </div>
              <div style="margin-top:10px">
                <b>Ø§ÛŒØ²ÙˆØªÙˆÙ¾â€ŒÙ‡Ø§ÛŒ Ø±Ø§ÛŒØ¬:</b>
                <table class="table" id="isoTable">
                  <thead><tr><th>Ø§ÛŒØ²ÙˆØªÙˆÙ¾</th><th>ÙØ±Ø§ÙˆØ§Ù†ÛŒ ØªÙ‚Ø±ÛŒØ¨ÛŒ</th></tr></thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>

            <div id="orbitalPanel" class="card" style="padding:10px">
              <h4 style="margin:0 0 8px">Ù…Ø¯Ù„ ÙØ¶Ø§ÛŒÛŒ Ø§ÙˆØ±Ø¨ÛŒØªØ§Ù„â€ŒÙ‡Ø§</h4>
              <canvas id="orbitalCanvas" width="320" height="320"></canvas>
              <div style="display:flex; gap:8px; margin-top:8px">
                <div class="pill">Ø±Ù†Ú¯â€ŒÙ‡Ø§: s=Ø¢Ø¨ÛŒØŒ p=Ø³Ø¨Ø²ØŒ d=Ù†Ø§Ø±Ù†Ø¬ÛŒØŒ f=Ø¨Ù†ÙØ´</div>
                <button id="exportOrbitals" class="btn">Ø®Ø±ÙˆØ¬ÛŒ PNG Ø§ÙˆØ±Ø¨ÛŒØªØ§Ù„</button>
              </div>
            </div>
          </div>
        </div>

        <div id="ptable-grid" class="ptable" aria-label="Periodic Table"></div>
      </div>
    </section>

    <!-- Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ Ø¬Ø§Ù…Ø¹ -->
    <section id="lab" class="section grid">
      <div class="card" style="grid-column:1 / span 6">
        <h3>Ù…Ø­Ø§Ø³Ø¨Ù‡â€ŒÚ¯Ø± pH (Ù‚ÙˆÛŒ/Ø¶Ø¹ÛŒÙ/Ø¨Ø§ÙØ±)</h3>
        <p class="info">Ù‚ÙˆÛŒâ€ŒÙ‡Ø§: pHâ‰ˆâˆ’log[H+]ØŒ Ø¶Ø¹ÛŒÙâ€ŒÙ‡Ø§: [H+]â‰ˆâˆš(KaÂ·C)ØŒ Ø¨Ø§ÙØ±: pH=pKa+log([Aâˆ’]/[HA]).</p>
        <div style="display:grid; gap:8px">
          <select id="phType">
            <option value="strongA">Ø§Ø³ÛŒØ¯ Ù‚ÙˆÛŒ</option>
            <option value="strongB">Ø¨Ø§Ø² Ù‚ÙˆÛŒ</option>
            <option value="weakA">Ø§Ø³ÛŒØ¯ Ø¶Ø¹ÛŒÙ</option>
            <option value="weakB">Ø¨Ø§Ø² Ø¶Ø¹ÛŒÙ</option>
            <option value="buffer">Ø¨Ø§ÙØ± (Hâ€“H)</option>
          </select>
          <input id="C" type="number" step="0.0001" placeholder="ØºÙ„Ø¸Øª (M)" />
          <input id="Ka" type="number" step="0.0000001" placeholder="Ka ÛŒØ§ Kb (Ø¨Ø±Ø§ÛŒ Ø¶Ø¹ÛŒÙâ€ŒÙ‡Ø§)" />
          <input id="pKa" type="number" step="0.01" placeholder="pKa (Ø¨Ø±Ø§ÛŒ Ø¨Ø§ÙØ±)" />
          <input id="ratio" type="number" step="0.001" placeholder="[Ø¨Ø§Ø² Ù…Ø²Ø¯ÙˆØ¬]/[Ø§Ø³ÛŒØ¯] (Ø¨Ø±Ø§ÛŒ Ø¨Ø§ÙØ±)" />
          <button id="calcPH" class="btn">Ù…Ø­Ø§Ø³Ø¨Ù‡ pH</button>
          <div id="phOut" class="pill">pH: â€”</div>
        </div>
      </div>

      <div class="card" style="grid-column:7 / span 6">
        <h3>Ø§Ù„Ú©ØªØ±ÙˆØ´ÛŒÙ…ÛŒ (Ù†Ø±Ù†Ø³Øª Ùˆ Ecell)</h3>
        <p class="info">E = EÂ° âˆ’ (0.05916/n) log Q Ø¯Ø± Û²ÛµÂ°C. ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø¯Ù‡ ØªØ§ E Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´ÙˆØ¯.</p>
        <div style="display:grid; gap:8px">
          <input id="E0" type="number" step="0.001" placeholder="EÂ° (ÙˆÙ„Øª)" />
          <input id="n" type="number" step="1" placeholder="n (ØªØ¹Ø¯Ø§Ø¯ Ø§Ù„Ú©ØªØ±ÙˆÙ†â€ŒÙ‡Ø§)" />
          <input id="Q" type="number" step="0.000001" placeholder="Q (Ù†Ø³Ø¨Øª ÙˆØ§Ú©Ù†Ø´)" />
          <button id="calcNernst" class="btn">Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†Ø±Ù†Ø³Øª</button>
          <div id="nernstOut" class="pill">E: â€”</div>
        </div>
        <div class="pill warn">Ù†Ú©ØªÙ‡: Q Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø§Ø³ØªØ› Ø¨Ø±Ø§ÛŒ Ø¯Ù‚Øª Ø¨Ø§Ù„Ø§ØŒ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ Ø¨Ø§ÛŒØ¯ Ù„Ø­Ø§Ø¸ Ø´ÙˆÙ†Ø¯.</div>
      </div>

      <div class="card" style="grid-column:1 / span 6">
        <h3>ØªØ±Ù…ÙˆØ´ÛŒÙ…ÛŒ (Î”H ÙˆØ§Ú©Ù†Ø´)</h3>
        <p class="info">Î”H â‰ˆ âˆ‘Î”Hf(Ù…Ø­ØµÙˆÙ„Ø§Øª) âˆ’ âˆ‘Î”Hf(ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±Ù‡Ø§). Ø¨Ø§Ù†Ú© Ø¢Ù…ÙˆØ²Ø´ÛŒ Ú¯ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø±Ø§ÛŒØ¬ Ø¶Ù…ÛŒÙ…Ù‡ Ø§Ø³Øª.</p>
        <div style="display:grid; gap:8px">
          <input id="rxnH" placeholder="Ù…Ø«Ø§Ù„: CH4 + 2O2 -> CO2 + 2H2O(l)" />
          <button id="calcDH" class="btn">Ù…Ø­Ø§Ø³Ø¨Ù‡ Î”H</button>
          <div id="dhOut" class="pill">Î”H: â€”</div>
        </div>
        <div class="pill warn">Ø¯Ù‚Øª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø§Ø³ØªØ› Ø¨Ø±Ø§ÛŒ ØªØ­Ù‚ÛŒÙ‚ØŒ Ø¨Ø§Ù†Ú© Ú©Ø§Ù…Ù„ Ù†ÛŒØ§Ø² Ø§Ø³Øª.</div>
      </div>

      <div class="card" style="grid-column:7 / span 6">
        <h3>ÙˆØ§Ú©Ù†Ø´â€ŒÙ†Ù…Ø§ Ø¨Ø§ Ø¨Ø§Ù„Ø§Ù†Ø³ Ø®ÙˆØ¯Ú©Ø§Ø±</h3>
        <p class="info">Ø¶Ø±Ø§ÛŒØ¨ ØµØ­ÛŒØ­ Ø¨Ø§ Ø­Ù„ Ø¯Ø³ØªÚ¯Ø§Ù‡Ø› ØªØ³Øª ØªØ¹Ø§Ø¯Ù„ Ø§ØªÙ…â€ŒÙ‡Ø§ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø§Ù…ØªÛŒØ§Ø² Ø¢Ù…ÙˆØ²Ø´ÛŒ Ù¾Ø³ Ø§Ø² Ù…ÙˆÙÙ‚ÛŒØª.</p>
        <div class="rxn">
          <input id="eq" class="eq" placeholder="KMnO4 + HCl -> KCl + MnCl2 + Cl2 + H2O" />
          <button id="balance" class="btn">Ø¨Ø§Ù„Ø§Ù†Ø³ Ú©Ù†</button>
          <div id="eqOut" class="pill">Ù†ØªÛŒØ¬Ù‡: â€”</div>
        </div>
      </div>
    </section>

    <!-- Ù…ÙˆÙ„Ú©ÙˆÙ„â€ŒØ³Ø§Ø² 2D + Ù†Ù…Ø§ÛŒØ´ 3D Ø³Ø¨Ú© -->
    <section id="mol" class="section card">
      <h3>Ù…ÙˆÙ„Ú©ÙˆÙ„â€ŒØ³Ø§Ø² 2D Ùˆ Ù†Ù…Ø§ÛŒØ´ 3D ØªÙˆÙ¾â€ŒÙˆÚ†ÙˆØ¨</h3>
      <p class="info">2D: Ø§Ø¶Ø§ÙÙ‡â€ŒÚ©Ø±Ø¯Ù† Ø§ØªÙ…â€ŒÙ‡Ø§ Ùˆ Ù¾ÛŒÙˆÙ†Ø¯Ù‡Ø§ Ø¨Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ø¸Ø±ÙÛŒØª (H=1, O=2, N=3, C=4). 3D: Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ Ú†Ø±Ø®Ø´ Ùˆ Ù†ÙˆØ± Ø³Ø§Ø¯Ù‡ Ø¯Ø± Canvas.</p>
      <div class="row" style="margin-bottom:10px">
        <button class="btn ghost" data-sample="H2O">Ø¢Ø¨ (H2O)</button>
        <button class="btn ghost" data-sample="C2H6O">Ø§ØªØ§Ù†ÙˆÙ„ (C2H6O)</button>
        <button class="btn ghost" data-sample="C6H6">Ø¨Ù†Ø²Ù† (C6H6)</button>
        <button id="clearMol" class="btn">Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ 2D</button>
      </div>
      <div class="grid" style="grid-template-columns:1fr 1fr; gap:12px">
        <div class="mol">
          <svg id="molCanvas" viewBox="0 0 600 280"></svg>
          <div class="pill" id="molOut">Ø±Ø§Ù‡Ù†Ù…Ø§ 2D: Alt=HØŒ Shift=OØŒ Ctrl=NØŒ Ø¨Ø¯ÙˆÙ† Ú©Ù„ÛŒØ¯=C. Ø±ÙˆÛŒ Ø¯Ùˆ Ø§ØªÙ… Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÙˆÙ†Ø¯ Ú©Ù„ÛŒÚ© Ú©Ù†.</div>
        </div>
        <div class="spec">
          <div class="row" style="margin-bottom:8px">
            <select id="mol3dSel">
              <option value="H2O">H2O</option>
              <option value="CO2">CO2</option>
              <option value="CH4">CH4</option>
              <option value="C2H6O">C2H6O</option>
              <option value="C6H6">C6H6</option>
            </select>
            <button id="mol3dDraw" class="btn">Ø±Ø³Ù… 3D</button>
          </div>
          <canvas id="mol3dCanvas" width="600" height="220"></canvas>
          <div class="pill">Ø±Ø§Ù‡Ù†Ù…Ø§ 3D: Ù…Ø§ÙˆØ³ Ø±Ø§ Ø­Ø±Ú©Øª Ø¨Ø¯Ù‡ ØªØ§ Ø¨Ú†Ø±Ø®Ø¯.</div>
        </div>
      </div>
    </section>

    <!-- Ø§Ø³Ù¾Ú©ØªØ±ÙˆØ³Ú©ÙˆÙ¾ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ -->
    <section id="spec" class="section card">
      <h3>Ø§Ø³Ù¾Ú©ØªØ±ÙˆØ³Ú©ÙˆÙ¾ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ (Ú¯Ø³ÛŒÙ„/Ø¬Ø°Ø¨ Ù†Ù…Ø§Ø¯ÛŒÙ†)</h3>
      <p class="info">Ø§Ù†ØªØ®Ø§Ø¨ Ø¹Ù†ØµØ± Ùˆ Ø±Ø³Ù… Ø®Ø·ÙˆØ· Ù†Ù…Ø§Ø¯ÛŒÙ† Ø±ÙˆÛŒ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ø±Ù†Ú¯ÛŒÙ†â€ŒÚ©Ù…Ø§Ù†. Ø¢Ù…ÙˆØ²Ø´ÛŒâ€”Ù†Ù‡ Ø¯Ø§Ø¯Ù‡ Ø¢Ø²Ù…Ø§ÛŒØ´Ú¯Ø§Ù‡ÛŒ Ú©Ø§Ù…Ù„.</p>
      <div class="row" style="margin-bottom:10px">
        <select id="specEl">
          <option value="H">H â€” Ù‡ÛŒØ¯Ø±ÙˆÚ˜Ù†</option>
          <option value="He">He â€” Ù‡Ù„ÛŒÙˆÙ…</option>
          <option value="Na">Na â€” Ø³Ø¯ÛŒÙ…</option>
          <option value="Hg">Hg â€” Ø¬ÛŒÙˆÙ‡</option>
          <option value="Fe">Fe â€” Ø¢Ù‡Ù†</option>
        </select>
        <button id="drawSpec" class="btn">Ø±Ø³Ù… Ø·ÛŒÙ</button>
      </div>
      <div class="spec"><canvas id="specCanvas" width="800" height="220"></canvas></div>
    </section>

    <!-- Ø¨Ø§Ù†Ú© ÙˆØ§Ú©Ù†Ø´â€ŒÙ‡Ø§ -->
    <section id="bank" class="section card">
      <h3>Ø¨Ø§Ù†Ú© ÙˆØ§Ú©Ù†Ø´â€ŒÙ‡Ø§ Ø¨Ø§ Ø¬Ø³ØªØ¬Ùˆ Ùˆ ÙÛŒÙ„ØªØ±</h3>
      <p class="info">ÙØµÙ„/Ù…ÙˆØ¶ÙˆØ¹/Ø³Ø·Ø­ Ø±Ø§ ÙÛŒÙ„ØªØ± Ú©Ù†ØŒ ÙˆØ§Ú©Ù†Ø´â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø¨ÛŒÙ† Ùˆ Ø¨Ø§ ÛŒÚ© Ú©Ù„ÛŒÚ© Ø¨Ù‡ ÙˆØ§Ú©Ù†Ø´â€ŒÙ†Ù…Ø§ Ø¨ÙØ±Ø³Øª.</p>
      <div class="row" style="gap:8px; margin-bottom:8px">
        <input id="bankQ" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ù†Ù…Ø§Ø¯/Ù†Ø§Ù… ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±..." />
        <select id="bankTopic">
          <option value="">Ù‡Ù…Ù‡ Ù…ÙˆØ¶ÙˆØ¹â€ŒÙ‡Ø§</option>
          <option value="acid-base">Ø§Ø³ÛŒØ¯-Ø¨Ø§Ø²</option>
          <option value="redox">Ø§Ú©Ø³Ø§ÛŒØ´-Ú©Ø§Ù‡Ø´</option>
          <option value="org">Ø¢Ù„ÛŒ</option>
          <option value="thermo">ØªØ±Ù…Ùˆ</option>
        </select>
        <select id="bankLevel">
          <option value="">Ù‡Ù…Ù‡ Ø³Ø·ÙˆØ­</option>
          <option value="basic">Ù…Ù‚Ø¯Ù…Ø§ØªÛŒ</option>
          <option value="intermediate">Ù…ÛŒØ§Ù†ÛŒ</option>
          <option value="advanced">Ù¾ÛŒØ´Ø±ÙØªÙ‡</option>
        </select>
      </div>
      <table class="table" id="bankTable">
        <thead><tr><th>ÙˆØ§Ú©Ù†Ø´</th><th>Ù…ÙˆØ¶ÙˆØ¹</th><th>Ø³Ø·Ø­</th><th>Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ÙˆØ§Ú©Ù†Ø´â€ŒÙ†Ù…Ø§</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- Ø¯Ø±Ø¨Ø§Ø±Ù‡ -->
    
<section id="about" class="section grid">
  <div class="card" style="grid-column:1 / span 7">
    <h3>Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§ âœ¨</h3>
    <p>Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø§ Ø¹Ø´Ù‚ Ùˆ Ø®Ù„Ø§Ù‚ÛŒØª ØªÙˆØ³Ø· <strong>Ú¯Ø±ÙˆÙ‡ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ Ø¢Ø±ÛŒâ€ŒÙ…Ø§Ù†Ø¯</strong> ØªÙˆØ³Ø¹Ù‡ ÛŒØ§ÙØªÙ‡ Ø§Ø³Øª.</p>
    <ul class="kpi">
      <li class="chip">ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ú¯Ø§Ù†: Ø¹Ù„ÛŒØ±Ø¶Ø§ Ø¢Ø²Ø§Ø¯ÛŒØ§Ù†ØŒ Ø¹Ù„ÛŒØ±Ø¶Ø§ Ù…ÙˆÙ„Ø§ÛŒÛŒâ€ŒÙØ±ØŒ Ù…Ø­Ù…Ø¯ Ø³Ø¹ÛŒØ¯ÛŒ ğŸ’»</li>
      <li class="chip">Ø¯Ø¨ÛŒØ± Ø±Ø§Ù‡Ù†Ù…Ø§: Ø¢Ù‚Ø§ÛŒ Ø´Ø¬Ø§Ø¹ Ø§Ù…ÛŒØ¯ÛŒâ€ŒØ¢Ø±Ø§ ğŸ‘¨â€ğŸ«</li>
      <li class="chip">Ø¯Ø¨ÛŒØ±Ø³ØªØ§Ù† Ø§Ù…ÛŒØ±Ú©Ø¨ÛŒØ± â€” Ø®Ø±Ù…â€ŒØ¢Ø¨Ø§Ø¯ØŒ Ù„Ø±Ø³ØªØ§Ù† ğŸ«</li>
    </ul>
  </div>
  <div class="card" style="grid-column:8 / span 5">
    <h3>Ù¾ÛŒØ§Ù… Ù…Ø§ â¤ï¸</h3>
    <p class="info">Ù…Ø§ Ø¨Ø§ÙˆØ± Ø¯Ø§Ø±ÛŒÙ… Ú©Ù‡ Ø¹Ù„Ù… Ø¨Ø§ÛŒØ¯ Ø²ÛŒØ¨Ø§ØŒ Ù‚Ø§Ø¨Ù„â€ŒÙÙ‡Ù… Ùˆ Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù‡Ù…Ù‡ Ø¨Ø§Ø´Ø¯. Ø§Ù…ÛŒØ¯ÙˆØ§Ø±ÛŒÙ… Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ù„Ù‡Ø§Ù…â€ŒØ¨Ø®Ø´ Ù†Ø³Ù„ Ø¬Ø¯ÛŒØ¯ Ø¯Ø§Ù†Ø´Ù…Ù†Ø¯Ø§Ù† Ø¨Ø§Ø´Ø¯.</p>
    <div class="pill">Ø¨Ø§ Ø¨Ù‡ØªØ±ÛŒÙ† Ø¢Ø±Ø²ÙˆÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡â€ŒØ§ÛŒ Ø±ÙˆØ´Ù†â€ŒØªØ± âœ¨</div>
  </div>
</section>


    <footer class="wrap footer">
      <div>Â© Ø´ÛŒÙ…ÛŒ Ø§Ù…ÛŒØ±Ú©Ø¨ÛŒØ± â€” Ø¢Ø±ÛŒâ€ŒÙ…Ø§Ù†Ø¯. Ø·Ø±Ø§Ø­ÛŒ Ø¨Ø§ Ø¹Ø´Ù‚ Ùˆ ÙˆØ³ÙˆØ§Ø³.</div>
      <div>Ø¨Ø±Ø§ÛŒ Ù†Ø³Ø®Ù‡â€ŒÛŒ Ù†Ù…Ø§ÛŒØ´ÛŒ Ø¬Ù‡Ø§Ù†ÛŒ: Ø¯ÛŒØªØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¹Ù„Ù…ÛŒ Ú©Ø§Ù…Ù„â€ŒØªØ± Ø±Ø§ Ù…ÛŒâ€ŒØ§ÙØ²Ø§ÛŒÛŒÙ… (Ø§ÛŒØ²ÙˆØªÙˆÙ¾â€ŒÙ‡Ø§ØŒ Î”HfØŒ Ø®Ø·ÙˆØ· Ø·ÛŒÙÛŒ).</div>
    </footer>
  </main>

  <!-- Ø¯Ø§Ø¯Ù‡â€ŒÛŒ Ú©Ø§Ù…Ù„ Û³Û·â€“Û±Û±Û¸ ÙØ´Ø±Ø¯Ù‡â€ŒØ´Ø¯Ù‡ Ø¯Ø§Ø®Ù„ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª JSON (Ù†Ù…ÙˆÙ†Ù‡â€ŒÛŒ ÙØ´Ø±Ø¯Ù‡Ø› Ù‚Ø§Ø¨Ù„ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ Ø¨Ø§ Ø¯ÛŒØªØ§Ø³Øª Ú©Ø§Ù…Ù„) -->
  <script type="application/json" id="el-full">
  [
    {"n":37,"s":"Rb","name":"Ø±ÙˆØ¨ÛŒØ¯ÛŒÙˆÙ…","cat":"alkali","state":"Ø¬Ø§Ù…Ø¯","mass":85.468,"row":5,"col": 18,"iso":[["Rb-85",72.2],["Rb-87",27.8]]},
    {"n":38,"s":"Sr","name":"Ø§Ø³ØªØ±ÙˆÙ†Ø³ÛŒÙ…","cat":"alkaline","state":"Ø¬Ø§Ù…Ø¯","mass":87.62,"row":5,"col": 17,"iso":[["Sr-88",82.6],["Sr-86",9.9]]},
    {"n":39,"s":"Y","name":"Ø§ÛŒØªØ±ÛŒÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":88.906,"row":5,"col": 16,"iso":[["Y-89",100]]},
    {"n":40,"s":"Zr","name":"Ø²ÛŒØ±Ú©ÙˆÙ†ÛŒÙˆÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":91.224,"row":5,"col": 15,"iso":[["Zr-90",51.5]]},
    {"n":41,"s":"Nb","name":"Ù†ÛŒÙˆØ¨ÛŒÙˆÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":92.906,"row":5,"col": 14,"iso":[["Nb-93",100]]},
    {"n":42,"s":"Mo","name":"Ù…ÙˆÙ„ÛŒØ¨Ø¯Ù†","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":95.95,"row":5,"col": 13,"iso":[["Mo-98",24.1]]},
    {"n":43,"s":"Tc","name":"ØªÚ©Ù†ØªÛŒÙˆÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":98,"row":5,"col": 12,"iso":[["Tc-99","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":44,"s":"Ru","name":"Ø±ÙˆØ¯ÛŒÙˆÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":101.07,"row":5,"col": 11,"iso":[["Ru-102",31.6]]},
    {"n":45,"s":"Rh","name":"Ø±ÙˆØ¯ÛŒÙˆÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":102.905,"row":5,"col": 10,"iso":[["Rh-103",100]]},
    {"n":46,"s":"Pd","name":"Ù¾Ø§Ù„Ø§Ø¯ÛŒÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":106.42,"row":5,"col": 9,"iso":[["Pd-106",27.3]]},
    {"n":47,"s":"Ag","name":"Ù†Ù‚Ø±Ù‡","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":107.8682,"row":5,"col": 8,"iso":[["Ag-107",51.8],["Ag-109",48.2]]},
    {"n":48,"s":"Cd","name":"Ú©Ø§Ø¯Ù…ÛŒÙˆÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":112.414,"row":5,"col": 7,"iso":[["Cd-114",28.7]]},
    {"n":49,"s":"In","name":"Ø§ÛŒÙ†Ø¯ÛŒÙ…","cat":"post","state":"Ø¬Ø§Ù…Ø¯","mass":114.818,"row":5,"col": 6,"iso":[["In-115",95.7]]},
    {"n":50,"s":"Sn","name":"Ù‚Ù„Ø¹","cat":"post","state":"Ø¬Ø§Ù…Ø¯","mass":118.710,"row":5,"col": 5,"iso":[["Sn-120",32.6]]},
    {"n":51,"s":"Sb","name":"Ø¢Ù†ØªÛŒÙ…ÙˆØ§Ù†","cat":"metalloid","state":"Ø¬Ø§Ù…Ø¯","mass":121.760,"row":5,"col": 4,"iso":[["Sb-121",57.4],["Sb-123",42.6]]},
    {"n":52,"s":"Te","name":"ØªÙ„ÙˆØ±","cat":"metalloid","state":"Ø¬Ø§Ù…Ø¯","mass":127.60,"row":5,"col": 3,"iso":[["Te-130",34.1]]},
    {"n":53,"s":"I","name":"ÛŒØ¯","cat":"halogen","state":"Ø¬Ø§Ù…Ø¯","mass":126.904,"row":5,"col": 2,"iso":[["I-127",100]]},
    {"n":54,"s":"Xe","name":"Ø²Ù†ÙˆÙ†","cat":"noble","state":"Ú¯Ø§Ø²","mass":131.293,"row":5,"col": 1,"iso":[["Xe-129",26.4]]},

    {"n":55,"s":"Cs","name":"Ø³Ø²ÛŒÙ…","cat":"alkali","state":"Ø¬Ø§Ù…Ø¯","mass":132.905,"row":6,"col": 18,"iso":[["Cs-133",100]]},
    {"n":56,"s":"Ba","name":"Ø¨Ø§Ø±ÛŒÙ…","cat":"alkaline","state":"Ø¬Ø§Ù…Ø¯","mass":137.327,"row":6,"col": 17,"iso":[["Ba-138",71.7]]},
    {"n":57,"s":"La","name":"Ù„Ø§Ù†ØªØ§Ù†","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":138.905,"row":8,"col": 15,"iso":[["La-139",99.9]]},
    {"n":58,"s":"Ce","name":"Ø³Ø±ÛŒÙ…","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":140.116,"row":8,"col": 14,"iso":[["Ce-140",88.5]]},
    {"n":59,"s":"Pr","name":"Ù¾Ø±Ø§Ø²Ø¦ÙˆØ¯ÛŒÙ…ÛŒÙ…","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":140.908,"row":8,"col": 13,"iso":[["Pr-141",100]]},
    {"n":60,"s":"Nd","name":"Ù†Ø¦ÙˆØ¯ÛŒÙ…ÛŒÙ…","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":144.242,"row":8,"col": 12,"iso":[["Nd-142",27.2]]},
    {"n":61,"s":"Pm","name":"Ù¾Ø±ÙˆÙ…ØªÛŒÙˆÙ…","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":145,"row":8,"col": 11,"iso":[["Pm-147","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":62,"s":"Sm","name":"Ø³Ø§Ù…Ø§Ø±ÛŒÙ…","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":150.36,"row":8,"col": 10,"iso":[["Sm-152",26.7]]},
    {"n":63,"s":"Eu","name":"ÛŒÙˆØ±ÙˆÙ¾ÛŒÙˆÙ…","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":151.964,"row":8,"col": 9,"iso":[["Eu-153",52.2]]},
    {"n":64,"s":"Gd","name":"Ú¯Ø§Ø¯ÙˆÙ„ÛŒÙ†ÛŒÙˆÙ…","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":157.25,"row":8,"col": 8,"iso":[["Gd-158",24.8]]},
    {"n":65,"s":"Tb","name":"ØªØ±Ø¨ÛŒÙ…","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":158.925,"row":8,"col": 7,"iso":[["Tb-159",100]]},
    {"n":66,"s":"Dy","name":"Ø¯ÛŒØ³Ù¾Ø±ÙˆØ²ÛŒÙ…","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":162.500,"row":8,"col": 6,"iso":[["Dy-164",28.2]]},
    {"n":67,"s":"Ho","name":"Ù‡ÙˆÙ„Ù…ÛŒÙˆÙ…","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":164.930,"row":8,"col": 5,"iso":[["Ho-165",100]]},
    {"n":68,"s":"Er","name":"Ø§Ø±Ø¨ÛŒÙ…","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":167.259,"row":8,"col": 4,"iso":[["Er-166",33.6]]},
    {"n":69,"s":"Tm","name":"ØªÙˆÙ„ÛŒÙ…","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":168.934,"row":8,"col": 3,"iso":[["Tm-169",100]]},
    {"n":70,"s":"Yb","name":"ÛŒØªØ±Ø¨ÛŒÙˆÙ…","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":173.045,"row":8,"col": 2,"iso":[["Yb-174",31.8]]},
    {"n":71,"s":"Lu","name":"Ù„ÙˆØªØ³ÛŒÙ…","cat":"lan","state":"Ø¬Ø§Ù…Ø¯","mass":174.967,"row":8,"col": 1,"iso":[["Lu-175",97.4]]},

    {"n":72,"s":"Hf","name":"Ù‡ÙÙ†ÛŒÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":178.49,"row":6,"col": 15,"iso":[["Hf-180",35.1]]},
    {"n":73,"s":"Ta","name":"ØªØ§Ù†ØªØ§Ù„","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":180.948,"row":6,"col": 14,"iso":[["Ta-181",99.99]]},
    {"n":74,"s":"W","name":"ØªÙ†Ú¯Ø³ØªÙ†","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":183.84,"row":6,"col": 13,"iso":[["W-184",30.6]]},
    {"n":75,"s":"Re","name":"Ø±Ù†ÛŒÙˆÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":186.207,"row":6,"col": 12,"iso":[["Re-187",62.6]]},
    {"n":76,"s":"Os","name":"Ø§Ø³Ù…ÛŒÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":190.23,"row":6,"col": 11,"iso":[["Os-192",41.0]]},
    {"n":77,"s":"Ir","name":"Ø§ÛŒØ±ÛŒØ¯ÛŒÙˆÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":192.217,"row":6,"col": 10,"iso":[["Ir-193",62.7]]},
    {"n":78,"s":"Pt","name":"Ù¾Ù„Ø§ØªÛŒÙ†","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":195.084,"row":6,"col": 9,"iso":[["Pt-195",33.8]]},
    {"n":79,"s":"Au","name":"Ø·Ù„Ø§","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":196.9665,"row":6,"col": 8,"iso":[["Au-197",100]]},
    {"n":80,"s":"Hg","name":"Ø¬ÛŒÙˆÙ‡","cat":"transition","state":"Ù…Ø§ÛŒØ¹","mass":200.592,"row":6,"col": 7,"iso":[["Hg-202",29.9]]},
    {"n":81,"s":"Tl","name":"ØªØ§Ù„ÛŒÙˆÙ…","cat":"post","state":"Ø¬Ø§Ù…Ø¯","mass":204.38,"row":6,"col": 6,"iso":[["Tl-205",70.5]]},
    {"n":82,"s":"Pb","name":"Ø³Ø±Ø¨","cat":"post","state":"Ø¬Ø§Ù…Ø¯","mass":207.2,"row":6,"col": 5,"iso":[["Pb-208",52.4]]},
    {"n":83,"s":"Bi","name":"Ø¨ÛŒØ³Ù…ÙˆØª","cat":"post","state":"Ø¬Ø§Ù…Ø¯","mass":208.980,"row":6,"col": 4,"iso":[["Bi-209",100]]},
    {"n":84,"s":"Po","name":"Ù¾ÙˆÙ„ÙˆÙ†ÛŒÙ…","cat":"post","state":"Ø¬Ø§Ù…Ø¯","mass":209,"row":6,"col": 3,"iso":[["Po-209","Ø±Ø§Ø¯ÛŒÙˆØ§Ú©ØªÛŒÙˆ"]]},
    {"n":85,"s":"At","name":"Ø¢Ø³ØªØ§ØªÛŒÙ†","cat":"halogen","state":"Ø¬Ø§Ù…Ø¯","mass":210,"row":6,"col": 2,"iso":[["At-210","Ø±Ø§Ø¯ÛŒÙˆØ§Ú©ØªÛŒÙˆ"]]},
    {"n":86,"s":"Rn","name":"Ø±Ø§Ø¯ÙˆÙ†","cat":"noble","state":"Ú¯Ø§Ø²","mass":222,"row":6,"col": 1,"iso":[["Rn-222","Ø±Ø§Ø¯ÛŒÙˆØ§Ú©ØªÛŒÙˆ"]]},

    {"n":87,"s":"Fr","name":"ÙØ±Ø§Ù†Ø³ÛŒÙ…","cat":"alkali","state":"Ø¬Ø§Ù…Ø¯","mass":223,"row":7,"col": 18,"iso":[["Fr-223","Ø±Ø§Ø¯ÛŒÙˆØ§Ú©ØªÛŒÙˆ"]]},
    {"n":88,"s":"Ra","name":"Ø±Ø§Ø¯ÛŒÙˆÙ…","cat":"alkaline","state":"Ø¬Ø§Ù…Ø¯","mass":226,"row":7,"col": 17,"iso":[["Ra-226","Ø±Ø§Ø¯ÛŒÙˆØ§Ú©ØªÛŒÙˆ"]]},

    {"n":89,"s":"Ac","name":"Ø¢Ú©ØªÛŒÛŒÙ†ÛŒÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":227,"row":9,"col": 15,"iso":[["Ac-227","Ø±Ø§Ø¯ÛŒÙˆØ§Ú©ØªÛŒÙˆ"]]},
    {"n":90,"s":"Th","name":"ØªÙˆØ±ÛŒÙˆÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":232.038,"row":9,"col": 14,"iso":[["Th-232",100]]},
    {"n":91,"s":"Pa","name":"Ù¾Ø±ÙˆØªØ§Ú©ØªÛŒÙ†ÛŒÙˆÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":231.036,"row":9,"col": 13,"iso":[["Pa-231","Ø±Ø§Ø¯ÛŒÙˆØ§Ú©ØªÛŒÙˆ"]]},
    {"n":92,"s":"U","name":"Ø§ÙˆØ±Ø§Ù†ÛŒÙˆÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":238.029,"row":9,"col": 12,"iso":[["U-238",99.3],["U-235",0.7]]},
    {"n":93,"s":"Np","name":"Ù†Ù¾ØªÙˆÙ†ÛŒÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":237,"row":9,"col": 11,"iso":[["Np-237","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":94,"s":"Pu","name":"Ù¾Ù„ÙˆØªÙˆÙ†ÛŒÙˆÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":244,"row":9,"col": 10,"iso":[["Pu-239","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":95,"s":"Am","name":"Ø¢Ù…Ø±ÛŒÚ©ÛŒÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":243,"row":9,"col": 9,"iso":[["Am-241","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":96,"s":"Cm","name":"Ú©ÙˆØ±ÛŒÙˆÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":247,"row":9,"col": 8,"iso":[["Cm-244","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":97,"s":"Bk","name":"Ø¨Ø±Ú©Ù„ÛŒÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":247,"row":9,"col": 7,"iso":[["Bk-247","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":98,"s":"Cf","name":"Ú©Ø§Ù„ÛŒÙØ±Ù†ÛŒÙˆÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":251,"row":9,"col": 6,"iso":[["Cf-252","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":99,"s":"Es","name":"Ø¢ÛŒÙ†Ø´ØªÛŒÙ†ÛŒÙˆÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":252,"row":9,"col": 5,"iso":[["Es-253","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":100,"s":"Fm","name":"ÙØ±Ù…ÛŒÙˆÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":257,"row":9,"col": 4,"iso":[["Fm-257","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":101,"s":"Md","name":"Ù…Ù†Ø¯Ù„ÙˆÙˆÛŒÙˆÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":258,"row":9,"col": 3,"iso":[["Md-258","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":102,"s":"No","name":"Ù†ÙˆØ¨Ù„ÛŒÙˆÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":259,"row":9,"col": 2,"iso":[["No-259","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":103,"s":"Lr","name":"Ù„ÙˆØ±Ù†Ø³ÛŒÙ…","cat":"act","state":"Ø¬Ø§Ù…Ø¯","mass":266,"row":9,"col": 1,"iso":[["Lr-262","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},

    {"n":104,"s":"Rf","name":"Ø±ÛŒÙØ±ÛŒÙˆÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":267,"row":7,"col": 15,"iso":[["Rf-267","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":105,"s":"Db","name":"Ø¯ÙˆØ¨Ù†ÛŒÙˆÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":268,"row":7,"col": 14,"iso":[["Db-268","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":106,"s":"Sg","name":"Ø³ÛŒØ¨ÙˆØ±Ú¯ÛŒÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":269,"row":7,"col": 13,"iso":[["Sg-269","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":107,"s":"Bh","name":"Ø¨ÙˆØ±ÛŒÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":270,"row":7,"col": 12,"iso":[["Bh-270","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":108,"s":"Hs","name":"Ù‡Ø§Ø³ÛŒÙˆÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":270,"row":7,"col": 11,"iso":[["Hs-270","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":109,"s":"Mt","name":"Ù…Ø§ÛŒØªÙ†Ø±ÛŒÙˆÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":278,"row":7,"col": 10,"iso":[["Mt-278","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":110,"s":"Ds","name":"Ø¯Ø§Ø±Ù…Ø´ØªØ§ØªÛŒÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":281,"row":7,"col": 9,"iso":[["Ds-281","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":111,"s":"Rg","name":"Ø±ÙˆÙ†ØªÚ¯Ù†ÛŒÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":282,"row":7,"col": 8,"iso":[["Rg-282","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":112,"s":"Cn","name":"Ú©ÙˆÙ¾Ø±Ù†ÛŒØ³ÛŒÙˆÙ…","cat":"transition","state":"Ø¬Ø§Ù…Ø¯","mass":285,"row":7,"col": 7,"iso":[["Cn-285","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":113,"s":"Nh","name":"Ù†ÛŒÙ‡ÙˆÙ†ÛŒÙˆÙ…","cat":"post","state":"Ø¬Ø§Ù…Ø¯","mass":286,"row":7,"col": 6,"iso":[["Nh-286","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":114,"s":"Fl","name":"ÙÙ„Ø±ÙˆÙˆÛŒÙˆÙ…","cat":"post","state":"Ø¬Ø§Ù…Ø¯","mass":289,"row":7,"col": 5,"iso":[["Fl-289","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":115,"s":"Mc","name":"Ù…ÙˆØ³Ú©ÙˆÙˆÛŒÙˆÙ…","cat":"post","state":"Ø¬Ø§Ù…Ø¯","mass":290,"row":7,"col": 4,"iso":[["Mc-290","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":116,"s":"Lv","name":"Ù„ÙˆÙˆØ±Ù…","cat":"post","state":"Ø¬Ø§Ù…Ø¯","mass":293,"row":7,"col": 3,"iso":[["Lv-293","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":117,"s":"Ts","name":"ØªÙ†Ø³ÛŒÙ†","cat":"halogen","state":"Ø¬Ø§Ù…Ø¯","mass":294,"row":7,"col": 2,"iso":[["Ts-294","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]},
    {"n":118,"s":"Og","name":"Ø§ÙˆÚ¯Ø§Ù†Ø³ÙˆÙ†","cat":"noble","state":"â€”","mass":294,"row":7,"col": 1,"iso":[["Og-294","Ù…ØµÙ†ÙˆØ¹ÛŒ"]]}
  ]
  </script>

  <script>
    // ØªÙ…
    const themeBtn = document.getElementById('theme');
    themeBtn.addEventListener('click',()=>{
      document.body.classList.toggle('light');
      themeBtn.textContent = document.body.classList.contains('light') ? 'Ø­Ø§Ù„Øª Ø´Ø¨' : 'Ø­Ø§Ù„Øª Ø±ÙˆØ²';
    });

    // Ø§Ù…ØªÛŒØ§Ø²
    const scoreKey = 'chemworld_score';
    const scorePill = document.getElementById('scorePill');
    function setScore(v){ localStorage.setItem(scoreKey,String(v)); scorePill.textContent = `Ø§Ù…ØªÛŒØ§Ø²: ${v}`; }
    function addScore(p){ const cur = parseInt(localStorage.getItem(scoreKey)||'0',10); setScore(cur+p); }
    setScore(parseInt(localStorage.getItem(scoreKey)||'0',10));

    // Ø¯Ø§Ø¯Ù‡ Ù¾Ø§ÛŒÙ‡ 1â€“36
    let elements = [
      {n:1,s:"H",name:"Ù‡ÛŒØ¯Ø±ÙˆÚ˜Ù†",cat:"nonmetal",state:"Ú¯Ø§Ø²",mass:1.008,row:1,col: 18,iso:[["H-1",99.98],["H-2",0.02]]},
      {n:2,s:"He",name:"Ù‡Ù„ÛŒÙˆÙ…",cat:"noble",state:"Ú¯Ø§Ø²",mass:4.0026,row:1,col: 1,iso:[["He-4",99.999],["He-3",0.001]]},
      {n:3,s:"Li",name:"Ù„ÛŒØªÛŒÙ…",cat:"alkali",state:"Ø¬Ø§Ù…Ø¯",mass:6.94,row:2,col: 18,iso:[["Li-7",92.5],["Li-6",7.5]]},
      {n:4,s:"Be",name:"Ø¨Ø±ÛŒÙ„ÛŒÙ…",cat:"alkaline",state:"Ø¬Ø§Ù…Ø¯",mass:9.0122,row:2,col: 17,iso:[["Be-9",100]]},
      {n:5,s:"B",name:"Ø¨ÙˆØ±",cat:"metalloid",state:"Ø¬Ø§Ù…Ø¯",mass:10.81,row:2,col: 6,iso:[["B-11",80],["B-10",20]]},
      {n:6,s:"C",name:"Ú©Ø±Ø¨Ù†",cat:"nonmetal",state:"Ø¬Ø§Ù…Ø¯",mass:12.011,row:2,col: 5,iso:[["C-12",98.9],["C-13",1.1]]},
      {n:7,s:"N",name:"Ù†ÛŒØªØ±ÙˆÚ˜Ù†",cat:"nonmetal",state:"Ú¯Ø§Ø²",mass:14.007,row:2,col: 4,iso:[["N-14",99.6],["N-15",0.4]]},
      {n:8,s:"O",name:"Ø§Ú©Ø³ÛŒÚ˜Ù†",cat:"nonmetal",state:"Ú¯Ø§Ø²",mass:15.999,row:2,col: 3,iso:[["O-16",99.76],["O-18",0.2],["O-17",0.04]]},
      {n:9,s:"F",name:"ÙÙ„ÙˆØ¦ÙˆØ±",cat:"halogen",state:"Ú¯Ø§Ø²",mass:18.998,row:2,col: 2,iso:[["F-19",100]]},
      {n:10,s:"Ne",name:"Ù†Ø¦ÙˆÙ†",cat:"noble",state:"Ú¯Ø§Ø²",mass:20.180,row:2,col: 1,iso:[["Ne-20",90.5],["Ne-22",9.3],["Ne-21",0.2]]},
      {n:11,s:"Na",name:"Ø³Ø¯ÛŒÙ…",cat:"alkali",state:"Ø¬Ø§Ù…Ø¯",mass:22.990,row:3,col: 18,iso:[["Na-23",100]]},
      {n:12,s:"Mg",name:"Ù…Ù†ÛŒØ²ÛŒÙ…",cat:"alkaline",state:"Ø¬Ø§Ù…Ø¯",mass:24.305,row:3,col: 17,iso:[["Mg-24",78.99],["Mg-25",10],["Mg-26",11.01]]},
      {n:13,s:"Al",name:"Ø¢Ù„ÙˆÙ…ÛŒÙ†ÛŒÙˆÙ…",cat:"post",state:"Ø¬Ø§Ù…Ø¯",mass:26.982,row:3,col: 6,iso:[["Al-27",100]]},
      {n:14,s:"Si",name:"Ø³ÛŒÙ„ÛŒÚ©ÙˆÙ†",cat:"metalloid",state:"Ø¬Ø§Ù…Ø¯",mass:28.085,row:3,col: 5,iso:[["Si-28",92.2],["Si-29",4.7],["Si-30",3.1]]},
      {n:15,s:"P",name:"ÙØ³ÙØ±",cat:"nonmetal",state:"Ø¬Ø§Ù…Ø¯",mass:30.974,row:3,col: 4,iso:[["P-31",100]]},
      {n:16,s:"S",name:"Ú¯ÙˆÚ¯Ø±Ø¯",cat:"nonmetal",state:"Ø¬Ø§Ù…Ø¯",mass:32.06,row:3,col: 3,iso:[["S-32",95],["S-34",4],["S-33",1]]},
      {n:17,s:"Cl",name:"Ú©Ù„Ø±",cat:"halogen",state:"Ú¯Ø§Ø²",mass:35.45,row:3,col: 2,iso:[["Cl-35",75.8],["Cl-37",24.2]]},
      {n:18,s:"Ar",name:"Ø¢Ø±Ú¯ÙˆÙ†",cat:"noble",state:"Ú¯Ø§Ø²",mass:39.948,row:3,col: 1,iso:[["Ar-40",99.6],["Ar-36",0.34],["Ar-38",0.06]]},
      {n:19,s:"K",name:"Ù¾ØªØ§Ø³ÛŒÙ…",cat:"alkali",state:"Ø¬Ø§Ù…Ø¯",mass:39.098,row:4,col: 18,iso:[["K-39",93.3],["K-41",6.7]]},
      {n:20,s:"Ca",name:"Ú©Ù„Ø³ÛŒÙ…",cat:"alkaline",state:"Ø¬Ø§Ù…Ø¯",mass:40.078,row:4,col: 17,iso:[["Ca-40",96.9],["Ca-44",2.1]]},
      {n:21,s:"Sc",name:"Ø§Ø³Ú©Ø§Ù†Ø¯ÛŒÙ…",cat:"transition",state:"Ø¬Ø§Ù…Ø¯",mass:44.956,row:4,col: 16,iso:[["Sc-45",100]]},
      {n:22,s:"Ti",name:"ØªÛŒØªØ§Ù†ÛŒÙˆÙ…",cat:"transition",state:"Ø¬Ø§Ù…Ø¯",mass:47.867,row:4,col: 15,iso:[["Ti-48",73.7],["Ti-46",8.2]]},
      {n:23,s:"V",name:"ÙˆØ§Ù†Ø§Ø¯ÛŒÙ…",cat:"transition",state:"Ø¬Ø§Ù…Ø¯",mass:50.942,row:4,col: 14,iso:[["V-51",99.75],["V-50",0.25]]},
      {n:24,s:"Cr",name:"Ú©Ø±ÙˆÙ…",cat:"transition",state:"Ø¬Ø§Ù…Ø¯",mass:51.996,row:4,col: 13,iso:[["Cr-52",83.8]]},
      {n:25,s:"Mn",name:"Ù…Ù†Ú¯Ù†Ø²",cat:"transition",state:"Ø¬Ø§Ù…Ø¯",mass:54.938,row:4,col: 12,iso:[["Mn-55",100]]},
      {n:26,s:"Fe",name:"Ø¢Ù‡Ù†",cat:"transition",state:"Ø¬Ø§Ù…Ø¯",mass:55.845,row:4,col: 11,iso:[["Fe-56",91.75]]},
      {n:27,s:"Co",name:"Ú©Ø¨Ø§Ù„Øª",cat:"transition",state:"Ø¬Ø§Ù…Ø¯",mass:58.933,row:4,col: 10,iso:[["Co-59",100]]},
      {n:28,s:"Ni",name:"Ù†ÛŒÚ©Ù„",cat:"transition",state:"Ø¬Ø§Ù…Ø¯",mass:58.693,row:4,col: 9,iso:[["Ni-58",68.1]]},
      {n:29,s:"Cu",name:"Ù…Ø³",cat:"transition",state:"Ø¬Ø§Ù…Ø¯",mass:63.546,row:4,col: 8,iso:[["Cu-63",69]]},
      {n:30,s:"Zn",name:"Ø±ÙˆÛŒ",cat:"transition",state:"Ø¬Ø§Ù…Ø¯",mass:65.38,row:4,col: 7,iso:[["Zn-64",48.6]]},
      {n:31,s:"Ga",name:"Ú¯Ø§Ù„ÛŒÙ…",cat:"post",state:"Ø¬Ø§Ù…Ø¯",mass:69.723,row:4,col: 6,iso:[["Ga-69",60.1]]},
      {n:32,s:"Ge",name:"Ú˜Ø±Ù…Ø§Ù†ÛŒÙ…",cat:"metalloid",state:"Ø¬Ø§Ù…Ø¯",mass:72.630,row:4,col: 5,iso:[["Ge-74",36.7]]},
      {n:33,s:"As",name:"Ø¢Ø±Ø³Ù†ÛŒÚ©",cat:"metalloid",state:"Ø¬Ø§Ù…Ø¯",mass:74.922,row:4,col: 4,iso:[["As-75",100]]},
      {n:34,s:"Se",name:"Ø³Ù„Ù†ÛŒÙˆÙ…",cat:"nonmetal",state:"Ø¬Ø§Ù…Ø¯",mass:78.971,row:4,col: 3,iso:[["Se-80",49.6]]},
      {n:35,s:"Br",name:"Ø¨Ø±Ù…",cat:"halogen",state:"Ù…Ø§ÛŒØ¹",mass:79.904,row:4,col: 2,iso:[["Br-79",50.7]]},
      {n:36,s:"Kr",name:"Ú©Ø±ÛŒÙ¾ØªÙˆÙ†",cat:"noble",state:"Ú¯Ø§Ø²",mass:83.798,row:4,col: 1,iso:[["Kr-84",57]]}
    ];

    // Ù„ÙˆØ¯ Ú©Ø§Ù…Ù„ Ø§Ø² JSON Ø¯Ø§Ø®Ù„ÛŒ
    const loadFullBtn = document.getElementById('loadFull');
    loadFullBtn.addEventListener('click',()=>{
      const full = JSON.parse(document.getElementById('el-full').textContent);
      elements = elements.concat(full).sort((a,b)=> a.n-b.n);
      renderTable(); applyFilters();
      loadFullBtn.remove();
    });

    // Ø¹Ù†ØµØ± DOM
    const grid = document.getElementById('ptable-grid');
    const q = document.getElementById('q');
    const catSel = document.getElementById('cat');
    const sel = document.getElementById('sel');
    const pSymbol = document.getElementById('p-symbol');
    const pName = document.getElementById('p-name');
    const pNum = document.getElementById('p-num');
    const pMass = document.getElementById('p-mass');
    const pCat = document.getElementById('p-cat');
    const pState = document.getElementById('p-state');
    const pConf = document.getElementById('p-conf');
    const isoTableBody = document.querySelector('#isoTable tbody');

    // Ø±Ù†Ø¯Ø± Ø¬Ø¯ÙˆÙ„
    function renderTable(){
      grid.innerHTML = '';
      elements.forEach(e=>{
        const el = document.createElement('div');
        const catClass = 'cat-' + (e.cat || 'nonmetal');
        el.className = `el ${catClass}`; el.style.gridColumn = e.col;
        el.style.gridRow = e.row;
        el.dataset.n=e.n; el.dataset.symbol=e.s; el.dataset.name=e.name; el.dataset.cat=e.cat; el.dataset.state=e.state; el.dataset.mass=e.mass;
        el.tabIndex = 0;
        el.innerHTML = `<div class="num">${e.n}</div>${e.s}<div class="name">${e.name}</div>`;
        el.title = `${e.name} â€” ${e.s} â€” Z=${e.n}`;
        el.addEventListener('click',()=>selectEl(e));
        el.addEventListener('keydown',(ev)=>{ if(ev.key==='Enter') selectEl(e); });
        grid.appendChild(el);
      });
    }

    // Ø¬Ø³ØªØ¬ÙˆÛŒ ÙØ§Ø²ÛŒ
    function normalize(s){ return (s||'').toLowerCase().replace(/[Ø¢Ø£Ø¥]/g,'Ø§').trim(); }
    function fuzzyMatch(qs, e){
      const Q = normalize(qs);
      const fields = [e.s, e.name, String(e.n)].map(normalize);
      return fields.some(f => f.includes(Q));
    }
    function applyFilters(){
      const query = (q.value||'').trim();
      const c = catSel.value;
      grid.querySelectorAll('.el').forEach(el=>{
        const eObj = elements.find(x=> x.n == +el.dataset.n);
        const catOk = !c || el.dataset.cat===c;
        const qOk = !query || fuzzyMatch(query, eObj);
        el.style.opacity = (catOk && qOk) ? 1 : .18;
        el.style.filter = (catOk && qOk) ? 'none' : 'grayscale(1)';
      });
    }
    q.addEventListener('input', applyFilters);
    catSel.addEventListener('change', applyFilters);
    document.addEventListener('keydown',(ev)=>{ if(ev.key==='/'){ ev.preventDefault(); q.focus(); } });
    renderTable(); applyFilters();

    // Ø§ÙˆØ±Ø¨ÛŒØªØ§Ù„â€ŒÙ‡Ø§ Ø¨Ø§ Ù‚Ø§Ø¹Ø¯Ù‡â€ŒÛŒ Ù‡Ø§Ù†Ø¯ Ùˆ Ø§Ø³ØªØ«Ù†Ø§Ù‡Ø§ÛŒ Ù…Ø¹Ø±ÙˆÙ
    const orbitalCanvas = document.getElementById('orbitalCanvas');
    const octx = orbitalCanvas.getContext('2d');
    const exceptions = new Set(['Cr','Cu','Mo','Ag']);

    function electronConfigHund(Z, symbol){
      const order = [
        {n:1,l:'s',cap:2},{n:2,l:'s',cap:2},{n:2,l:'p',cap:6},{n:3,l:'s',cap:2},{n:3,l:'p',cap:6},
        {n:4,l:'s',cap:2},{n:3,l:'d',cap:10},{n:4,l:'p',cap:6},
        {n:5,l:'s',cap:2},{n:4,l:'d',cap:10},{n:5,l:'p',cap:6},
        {n:6,l:'s',cap:2},{n:4,l:'f',cap:14},{n:5,l:'d',cap:10},{n:6,l:'p',cap:6},
        {n:7,l:'s',cap:2},{n:5,l:'f',cap:14},{n:6,l:'d',cap:10},{n:7,l:'p',cap:6}
      ];
      let left = Z;
      const conf = [];
      for(const sub of order){
        if(left<=0) break;
        const put = Math.min(left, sub.cap);
        conf.push({...sub, e: put});
        left -= put;
      }
      if(exceptions.has(symbol)){
        const dIdx = conf.findIndex(s=> s.l==='d');
        const sIdx = conf.findIndex(s=> s.l==='s' && s.n === (conf[dIdx]?.n||0)+1);
        if(dIdx>=0 && sIdx>=0 && conf[sIdx].e>0){
          conf[sIdx].e -= 1; conf[dIdx].e += 1;
        }
      }
      return conf;
    }
    function configString(conf){
      return conf.map(s=> `${s.n}${s.l}<sup>${s.e}</sup>`).join(' ');
    }
    function drawOrbitalsHund(conf){
      const ctx = octx, W = orbitalCanvas.width, H = orbitalCanvas.height;
      ctx.clearRect(0,0,W,H);
      const cx=W/2, cy=H/2;
      const colors = {s:'#4da6ff', p:'#37ff8b', d:'#ff9f59', f:'#a78bfa'};
      const layers = {};
      conf.forEach(s=>{
        (layers[s.n] ||= []).push({type:s.l, e:s.e});
      });
      const ns = Object.keys(layers).map(Number).sort((a,b)=>a-b);
      ns.forEach((n,i)=>{
        const r = 40 + i*26;
        ctx.strokeStyle='#8992b3'; ctx.lineWidth=1.1;
        ctx.beginPath(); ctx.arc(cx,cy,r,0,Math.PI*2); ctx.stroke();
        const subs = layers[n];
        subs.forEach((sub, subIdx)=>{
          const slots = (sub.type==='s')?1 : (sub.type==='p')?3 : (sub.type==='d')?5 : 7;
          const electrons = sub.e;
          let placed = 0;
          // Ù†ÛŒÙ…â€ŒÙ¾Ø± Ù¾ÛŒØ´ Ø§Ø² Ø¬ÙØªâ€ŒØ´Ø¯Ù†
          for(let k=0; k<slots && placed<electrons; k++){
            const ang = (k/slots)*2*Math.PI;
            const x = cx+Math.cos(ang)*r, y = cy+Math.sin(ang)*r;
            ctx.fillStyle=colors[sub.type];
            ctx.beginPath(); ctx.arc(x,y,4.2,0,Math.PI*2); ctx.fill();
            placed++;
          }
          let k=0;
          while(placed<electrons){
            const ang = (k/slots)*2*Math.PI;
            const x = cx+Math.cos(ang)*r, y = cy+Math.sin(ang)*r;
            ctx.fillStyle=colors[sub.type];
            ctx.beginPath(); ctx.arc(x+6,y,4.2,0,Math.PI*2); ctx.fill();
            placed++; k++;
          }
          ctx.fillStyle='#a6afd3'; ctx.font='11px sans-serif';
          ctx.fillText(`${sub.type}`, cx+r+6, cy-8+subIdx*12);
        });
        ctx.fillStyle='#a6afd3'; ctx.font='12px sans-serif';
        ctx.fillText(`n=${n}`, cx+r+6, cy+4);
      });
    }

    // Ø§Ù†ØªØ®Ø§Ø¨ Ø¹Ù†ØµØ±
    function selectEl(e){
      sel.innerHTML = `Ø¹Ù†ØµØ± Ø§Ù†ØªØ®Ø§Ø¨ÛŒ: <strong>${e.s}</strong> â€” ${e.name} (Z=${e.n})`;
      pSymbol.textContent = e.s; pName.textContent = e.name; pNum.textContent = e.n; pMass.textContent = e.mass; pCat.textContent = e.cat; pState.textContent = e.state;
      const conf = electronConfigHund(e.n, e.s);
      pConf.innerHTML = configString(conf);
      isoTableBody.innerHTML = '';
      (e.iso||[]).forEach(([iso,ab])=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${iso}</td><td>${ab}%</td>`;
        isoTableBody.appendChild(tr);
      });
      drawOrbitalsHund(conf);
    }

    // Ø®Ø±ÙˆØ¬ÛŒ Ø§ÙˆØ±Ø¨ÛŒØªØ§Ù„â€ŒÙ‡Ø§ Ùˆ Ø§ÛŒØ²ÙˆØªÙˆÙ¾â€ŒÙ‡Ø§
    document.getElementById('exportOrbitals').addEventListener('click',()=>{
      const url = orbitalCanvas.toDataURL('image/png');
      const a = document.createElement('a');
      a.href = url; a.download = `orbitals_${pSymbol.textContent}.png`; a.click();
    });
    document.getElementById('exportIso').addEventListener('click',()=>{
      const rows = [...isoTableBody.querySelectorAll('tr')].map(tr=> [...tr.children].map(td=> td.textContent));
      const csv = 'isotope,abundance\n' + rows.map(r=> r.join(',')).join('\n');
      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = `isotopes_${pSymbol.textContent}.csv`; a.click();
      URL.revokeObjectURL(url);
    });

    // Ø§Ø³Ù¾Ú©ØªØ±ÙˆØ³Ú©ÙˆÙ¾ÛŒ
    const specCanvas = document.getElementById('specCanvas'), specEl = document.getElementById('specEl'), drawSpec = document.getElementById('drawSpec'); const sctx = specCanvas.getContext('2d');
    const spectra = {'H':[656,486,434,410],'He':[447,501,587,667],'Na':[589,589],'Hg':[405,436,546,577],'Fe':[438,492,526,532,550]};
    function drawGradient(){
      const grd = sctx.createLinearGradient(0,0,specCanvas.width,0);
      grd.addColorStop(0,'#4b0082'); grd.addColorStop(.17,'#0000ff'); grd.addColorStop(.33,'#00ffff'); grd.addColorStop(.5,'#00ff00'); grd.addColorStop(.67,'#ffff00'); grd.addColorStop(.83,'#ff7f00'); grd.addColorStop(1,'#ff0000');
      sctx.fillStyle = grd; sctx.fillRect(0,0,specCanvas.width,specCanvas.height);
    }
    function nmToX(nm){ const min=380, max=740; return (nm-min)/(max-min)*specCanvas.width; }
    function drawLines(lines){
      sctx.globalAlpha=0.95;
      lines.forEach(nm=>{
        const x = nmToX(nm);
        sctx.strokeStyle = '#ffffff'; sctx.lineWidth = 2;
        sctx.beginPath(); sctx.moveTo(x,20); sctx.lineTo(x,specCanvas.height-20); sctx.stroke();
        sctx.fillStyle='#fff'; sctx.font='12px monospace'; sctx.fillText(`${nm} nm`, x+4, 28);
      });
    }
    drawSpec.addEventListener('click',()=>{ sctx.clearRect(0,0,specCanvas.width,specCanvas.height); drawGradient(); drawLines(spectra[specEl.value]||[]); });
    drawSpec.click();

    // Ù…ÙˆÙ„Ú©ÙˆÙ„â€ŒØ³Ø§Ø² 2D
    const svg = document.getElementById('molCanvas'), molOut = document.getElementById('molOut'), samples2d = document.querySelectorAll('[data-sample]'), clearMol = document.getElementById('clearMol');
    let atoms=[], bonds=[], selected=null;
    const maxValence = {H:1,O:2,N:3,C:4};
    function bondCount(i){ return bonds.reduce((acc,[a,b])=> acc + ((a===i||b===i)?1:0), 0); }
    function drawMol(){
      svg.innerHTML='';
      bonds.forEach(([i,j])=>{
        const a=atoms[i], b=atoms[j];
        const line = document.createElementNS('http://www.w3.org/2000/svg','line');
        line.setAttribute('x1',a.x); line.setAttribute('y1',a.y);
        line.setAttribute('x2',b.x); line.setAttribute('y2',b.y);
        line.setAttribute('class','bond'); svg.appendChild(line);
      });
      atoms.forEach((a,idx)=>{
        const g=document.createElementNS('http://www.w3.org/2000/svg','g');
        const c=document.createElementNS('http://www.w3.org/2000/svg','circle');
        c.setAttribute('cx',a.x); c.setAttribute('cy',a.y); c.setAttribute('r',16); c.setAttribute('class','atom');
        c.addEventListener('click',()=>{
          if(selected===null){ selected=idx; molOut.textContent=`Ø§ØªÙ… Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯: ${a.s}. Ø±ÙˆÛŒ Ø§ØªÙ… Ø¯ÙˆÙ… Ú©Ù„ÛŒÚ© Ø¨Ø±Ø§ÛŒ Ù¾ÛŒÙˆÙ†Ø¯.`; }
          else if(selected!==idx){
            const canA = bondCount(selected) < (maxValence[atoms[selected].s]||4);
            const canB = bondCount(idx) < (maxValence[atoms[idx].s]||4);
            if(canA && canB){ bonds.push([selected,idx]); molOut.textContent='Ù¾ÛŒÙˆÙ†Ø¯ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯.'; }
            else{ molOut.textContent='Ø¸Ø±ÙÛŒØª ÛŒÚ©ÛŒ Ø§Ø² Ø§ØªÙ…â€ŒÙ‡Ø§ Ù¾Ø± Ø´Ø¯Ù‡.'; }
            selected=null; drawMol();
          } else { selected=null; molOut.textContent='Ù„ØºÙˆ Ø§Ù†ØªØ®Ø§Ø¨.'; }
        });
        const t=document.createElementNS('http://www.w3.org/2000/svg','text');
        t.setAttribute('x',a.x); t.setAttribute('y',a.y+4); t.setAttribute('text-anchor','middle'); t.setAttribute('class','label'); t.textContent=a.s;
        g.appendChild(c); g.appendChild(t); svg.appendChild(g);
      });
    }
    svg.addEventListener('click',(e)=>{
      const rect=svg.getBoundingClientRect(); const x=e.clientX-rect.left, y=e.clientY-rect.top;
      const s = e.altKey ? 'H' : (e.shiftKey ? 'O' : (e.ctrlKey ? 'N' : 'C'));
      atoms.push({s,x,y}); drawMol();
    });
    clearMol.addEventListener('click',()=>{ atoms=[]; bonds=[]; selected=null; drawMol(); molOut.textContent='Ù¾Ø§Ú© Ø´Ø¯. Ø±ÙˆÛŒ Ø¨ÙˆÙ… Ú©Ù„ÛŒÚ© Ú©Ù† ØªØ§ Ø§ØªÙ… Ø§Ø¶Ø§ÙÙ‡ Ø´ÙˆØ¯.'; });
    const sampleLayouts = {
      'H2O': ()=>{ atoms=[{s:'O',x:300,y:140},{s:'H',x:260,y:100},{s:'H',x:340,y:100}]; bonds=[[0,1],[0,2]]; },
      'C2H6O': ()=>{ atoms=[{s:'C',x:280,y:140},{s:'C',x:330,y:140},{s:'O',x:380,y:140},{s:'H',x:260,y:100},{s:'H',x:260,y:180},{s:'H',x:300,y:100},{s:'H',x:310,y:180},{s:'H',x:350,y:100},{s:'H',x:350,y:180}]; bonds=[[0,1],[1,2],[0,3],[0,4],[0,5],[1,6],[1,7],[1,8]]; },
      'C6H6': ()=>{ const cx=300,cy=140,r=60; atoms=[]; for(let i=0;i<6;i++){ const ang=(Math.PI*2/6)*i; atoms.push({s:'C',x:cx+Math.cos(ang)*r,y:cy+Math.sin(ang)*r}); }
                  bonds=[[0,1],[1,2],[2,3],[3,4],[4,5],[5,0]]; for(let i=0;i<6;i++){ atoms.push({s:'H',x:atoms[i].x+(atoms[i].x-cx)*0.5,y:atoms[i].y+(atoms[i].y-cy)*0.5}); bonds.push([i,6+i]); } }
    };
    samples2d.forEach(b=> b.addEventListener('click',()=>{ sampleLayouts[b.dataset.sample](); drawMol(); molOut.textContent=`Ù†Ù…ÙˆÙ†Ù‡ ${b.dataset.sample} Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯.`; }));
    drawMol();

    // 3D Ø³Ø¨Ú© Ø±ÙˆÛŒ Canvas
    const mol3dCanvas = document.getElementById('mol3dCanvas');
    const mctx = mol3dCanvas.getContext('2d');
    const mol3dSel = document.getElementById('mol3dSel');
    const mol3dDraw = document.getElementById('mol3dDraw');
    let angleX = 0, angleY = 0;
    let mouseDown = false, lastX=0, lastY=0;
    mol3dCanvas.addEventListener('mousedown',e=>{ mouseDown=true; lastX=e.clientX; lastY=e.clientY; });
    window.addEventListener('mouseup',()=>{ mouseDown=false; });
    window.addEventListener('mousemove',e=>{
      if(!mouseDown) return;
      angleY += (e.clientX - lastX) * 0.01;
      angleX += (e.clientY - lastY) * 0.01;
      lastX = e.clientX; lastY = e.clientY;
      draw3d(currentMol);
    });

    function rotX(p,a){ const c=Math.cos(a), s=Math.sin(a); return {x:p.x, y:p.y*c - p.z*s, z:p.y*s + p.z*c}; }
    function rotY(p,a){ const c=Math.cos(a), s=Math.sin(a); return {x:p.x*c + p.z*s, y:p.y, z:-p.x*s + p.z*c}; }
    function proj(p){ const d = 400; const z = p.z + d; const s = d / z; return {x: mol3dCanvas.width/2 + p.x*s, y: mol3dCanvas.height/2 + p.y*s, s}; }
    function drawSphere(x,y,r,color){ mctx.fillStyle=color; mctx.beginPath(); mctx.arc(x,y,r,0,Math.PI*2); mctx.fill(); }
    function drawStick(x1,y1,x2,y2,color){ mctx.strokeStyle=color; mctx.lineWidth=4; mctx.beginPath(); mctx.moveTo(x1,y1); mctx.lineTo(x2,y2); mctx.stroke(); }
    const colors = {H:'#ffffff', C:'#444', O:'#ff4d4d', N:'#4da6ff'};
    const models = {
      'H2O': {atoms:[{s:'O',x:0,y:0,z:0},{s:'H',x:-40,y:30,z:0},{s:'H',x:40,y:30,z:0}], bonds:[[0,1],[0,2]]},
      'CO2': {atoms:[{s:'O',x:-60,y:0,z:0},{s:'C',x:0,y:0,z:0},{s:'O',x:60,y:0,z:0}], bonds:[[0,1],[1,2]]},
      'CH4': {atoms:[{s:'C',x:0,y:0,z:0},{s:'H',x:60,y:0,z:0},{s:'H',x:-60,y:0,z:0},{s:'H',x:0,y:60,z:0},{s:'H',x:0,y:-60,z:0}], bonds:[[0,1],[0,2],[0,3],[0,4]]},
      'C2H6O': {atoms:[{s:'C',x:-40,y:0,z:0},{s:'C',x:40,y:0,z:0},{s:'O',x:100,y:0,z:0},{s:'H',x:-80,y:40,z:0},{s:'H',x:-80,y:-40,z:0},{s:'H',x:0,y:40,z:0},{s:'H',x:0,y:-40,z:0},{s:'H',x:80,y:40,z:0},{s:'H',x:80,y:-40,z:0}], bonds:[[0,1],[1,2],[0,3],[0,4],[0,5],[1,6],[1,7],[1,8]]},
      'C6H6': {atoms:(()=>{ const a=[]; const r=80; for(let i=0;i<6;i++){const ang=(Math.PI*2/6)*i; a.push({s:'C',x:Math.cos(ang)*r,y:Math.sin(ang)*r,z:0});} for(let i=0;i<6;i++){ const v=a[i]; a.push({s:'H',x:v.x*1.4,y:v.y*1.4,z:0}); } return a; })(), bonds:(()=>{ const b=[]; for(let i=0;i<6;i++){ b.push([i,(i+1)%6]); b.push([i,6+i]); } return b; })()}
    };
    let currentMol = models['H2O'];
    function draw3d(model){
      mctx.clearRect(0,0,mol3dCanvas.width,mol3dCanvas.height);
      mctx.fillStyle='#0b1022'; mctx.fillRect(0,0,mol3dCanvas.width,mol3dCanvas.height);
      const transformed = model.atoms.map(p=> rotY(rotX(p,angleX), angleY));
      const projected = transformed.map(p=> proj(p));
      model.bonds.forEach(([i,j])=>{
        const pi = projected[i], pj = projected[j];
        drawStick(pi.x,pi.y,pj.x,pj.y,'#8ab');
      });
      projected.forEach((pp,idx)=>{
        const s = model.atoms[idx].s;
        drawSphere(pp.x, pp.y, 12*pp.s/2, colors[s]||'#ccc');
      });
    }
    mol3dDraw.addEventListener('click',()=>{ currentMol = models[mol3dSel.value]; draw3d(currentMol); });
    draw3d(currentMol);

    // Ø¨Ø§Ù†Ú© ÙˆØ§Ú©Ù†Ø´â€ŒÙ‡Ø§
    const bankData = [
      {eq:'Zn + 2HCl -> ZnCl2 + H2', topic:'acid-base', level:'basic'},
      {eq:'Fe + O2 -> Fe2O3', topic:'redox', level:'basic'},
      {eq:'KMnO4 + HCl -> KCl + MnCl2 + Cl2 + H2O', topic:'redox', level:'advanced'},
      {eq:'CH4 + 2O2 -> CO2 + 2H2O(l)', topic:'thermo', level:'basic'},
      {eq:'C2H6O + 3O2 -> 2CO2 + 3H2O', topic:'org', level:'intermediate'},
      {eq:'NH3 + HCl -> NH4Cl', topic:'acid-base', level:'basic'}
    ];
    const bankQ = document.getElementById('bankQ');
    const bankTopic = document.getElementById('bankTopic');
    const bankLevel = document.getElementById('bankLevel');
    const bankTableBody = document.querySelector('#bankTable tbody');

    function renderBank(){
      bankTableBody.innerHTML = '';
      const qv = (bankQ.value||'').toLowerCase();
      const tv = bankTopic.value; const lv = bankLevel.value;
      bankData.forEach(item=>{
        const passQ = !qv || item.eq.toLowerCase().includes(qv);
        const passT = !tv || item.topic===tv;
        const passL = !lv || item.level===lv;
        if(passQ && passT && passL){
          const tr = document.createElement('tr');
          const btn = `<button class="btn" data-eq="${item.eq}">Ø§Ø±Ø³Ø§Ù„</button>`;
          tr.innerHTML = `<td>${item.eq}</td><td>${item.topic}</td><td>${item.level}</td><td>${btn}</td>`;
          bankTableBody.appendChild(tr);
        }
      });
      bankTableBody.querySelectorAll('button[data-eq]').forEach(b=>{
        b.addEventListener('click',()=>{ document.getElementById('eq').value = b.dataset.eq; window.location.hash = '#rxn'; });
      });
    }
    bankQ.addEventListener('input', renderBank);
    bankTopic.addEventListener('change', renderBank);
    bankLevel.addEventListener('change', renderBank);
    renderBank();

    // Ù†Ø±Ù†Ø³Øª
    const E0 = document.getElementById('E0'), nEl = document.getElementById('n'), QEl = document.getElementById('Q'), nernstOut = document.getElementById('nernstOut');
    document.getElementById('calcNernst').addEventListener('click',()=>{
      const E0v = parseFloat(E0.value), nv = parseInt(nEl.value), Qv = parseFloat(QEl.value);
      if([E0v,nv,Qv].every(x=>isFinite(x)) && nv>0 && Qv>0){
        const E = E0v - (0.05916/nv) * Math.log10(Qv);
        nernstOut.textContent = `E(Û²ÛµÂ°C): ${E.toFixed(3)} V`;
        nernstOut.className = 'pill ok';
        addScore(5);
      }else{
        nernstOut.textContent = 'ÙˆØ±ÙˆØ¯ÛŒ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª.'; nernstOut.className = 'pill bad';
      }
    });

    // pH
    const phType = document.getElementById('phType'), CEl = document.getElementById('C'), KaEl = document.getElementById('Ka'), pKaEl = document.getElementById('pKa'), ratioEl = document.getElementById('ratio'), phOut = document.getElementById('phOut');
    document.getElementById('calcPH').addEventListener('click',()=>{
      const c = parseFloat(CEl.value)||0, ka = parseFloat(KaEl.value)||0, pka = parseFloat(pKaEl.value)||0, r = parseFloat(ratioEl.value)||0;
      function clamp(x){ return Math.max(0, Math.min(14, x)); }
      let pH = NaN;
      if(phType.value==='strongA'){ pH = clamp(-Math.log10(Math.max(c,1e-12))); }
      else if(phType.value==='strongB'){ pH = clamp(14 + Math.log10(Math.max(c,1e-12))*(-1)); }
      else if(phType.value==='weakA'){ const x = Math.sqrt(Math.max(ka*c,0)); pH = clamp(-Math.log10(Math.max(x,1e-12))); }
      else if(phType.value==='weakB'){ const x = Math.sqrt(Math.max(ka*c,0)); pH = clamp(14 + Math.log10(Math.max(x,1e-12))*(-1)); }
      else if(phType.value==='buffer'){ pH = clamp(pka + Math.log10(Math.max(r,1e-6))); }
      phOut.textContent = isFinite(pH) ? `pH: ${pH.toFixed(2)}` : 'ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø±Ø³Øª Ø¨Ø¯Ù‡.';
      phOut.className = isFinite(pH) ? 'pill ok' : 'pill bad';
      if(isFinite(pH)) addScore(5);
    });

    // Î”H
    const Hf = {
      'CH4': -74.8, 'CO2': -393.5, 'H2O(l)': -285.8, 'H2O(g)': -241.8, 'O2': 0, 'H2': 0,
      'NH3': -46.1, 'NO2': 33.2, 'N2': 0, 'HCl': -92.3, 'NaCl(s)': -411.1, 'CO': -110.5,
      'C2H6O(l)': -277.7, 'C6H6(l)': 49.0, 'SO2': -296.8, 'H2SO4(l)': -814.0
    };
    function parseSpecies(s){
      const m = s.match(/(.*?)(\([a-z]\))?$/i); const core = (m? m[1] : s).trim(); const phase = (m && m[2]) ? m[2] : '';
      return core + (phase ? phase.replace(/[()]/g,'') : '');
    }
    function parseSideSimple(side){ return side.split('+').map(x=>x.trim()).filter(Boolean); }
    function coefAndSpec(s){
      const m = s.match(/^(\d+)\s*(.*)$/); return {coef: m ? parseInt(m[1]) : 1, spec: m ? m[2].trim() : s.trim()};
    }
    const rxnHInput = document.getElementById('rxnH'), dhOut = document.getElementById('dhOut');
    document.getElementById('calcDH').addEventListener('click',()=>{
      const raw = (rxnHInput.value||'').replace('â†’','>').replace('=>','>').replace('->','>').trim();
      if(!raw.includes('>')){ dhOut.textContent='Î”H: ÙˆØ§Ú©Ù†Ø´ Ø±Ø§ Ø¨Ø§ -> ÙˆØ§Ø±Ø¯ Ú©Ù†.'; dhOut.className='pill bad'; return; }
      const [lhs,rhs] = raw.split('>').map(s=>s.trim());
      const L = parseSideSimple(lhs).map(coefAndSpec), R = parseSideSimple(rhs).map(coefAndSpec);
      let sumR=0, sumL=0, missing=[];
      R.forEach(({coef,spec})=>{ const k=parseSpecies(spec); if(Hf[k]!==undefined) sumR += coef*Hf[k]; else missing.push(k); });
      L.forEach(({coef,spec})=>{ const k=parseSpecies(spec); if(Hf[k]!==undefined) sumL += coef*Hf[k]; else missing.push(k); });
      if(missing.length){ dhOut.textContent = 'Î”H: Ø¯Ø§Ø¯Ù‡â€ŒÛŒ Ø§ÛŒÙ†â€ŒÙ‡Ø§ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª: ' + missing.join(', '); dhOut.className='pill warn'; return; }
      const dH = (sumR - sumL).toFixed(1);
      dhOut.textContent = `Î”H ÙˆØ§Ú©Ù†Ø´ â‰ˆ ${dH} kJ/mol`;
      dhOut.className = 'pill ok';
      addScore(10);
    });

    // Ø¨Ø§Ù„Ø§Ù†Ø³ Ø®ÙˆØ¯Ú©Ø§Ø± ÙˆØ§Ú©Ù†Ø´â€ŒÙ‡Ø§
    const eqIn = document.getElementById('eq'), balanceBtn = document.getElementById('balance'), eqOut = document.getElementById('eqOut');
    function tokenize(formula){ return formula.match(/[A-Z][a-z]?|\d+|\(|\)|\Â·|[Â·]/g) || []; }
    function countAtoms(formula){
      const tokens = tokenize(formula); const stack=[new Map()];
      for(let i=0;i<tokens.length;i++){
        const t=tokens[i];
        if(t==='('){ stack.push(new Map()); }
        else if(t===')'){
          const top = stack.pop(); const mult = (tokens[i+1] && /^\d+$/.test(tokens[i+1])) ? parseInt(tokens[++i]) : 1;
          top.forEach((v,k)=> stack[stack.length-1].set(k,(stack[stack.length-1].get(k)||0)+v*mult));
        }else if(/^[A-Z][a-z]?$/.test(t)){
          const mult = (tokens[i+1] && /^\d+$/.test(tokens[i+1])) ? parseInt(tokens[++i]) : 1;
          const cur = stack[stack.length-1]; cur.set(t,(cur.get(t)||0)+mult);
        }
      }
      return stack.pop();
    }
    function parseSideEq(side){ return side.split('+').map(s=>s.trim()).filter(Boolean); }
    function gcd(a,b){ return b?gcd(b,a%b):Math.abs(a); }
    function lcm(a,b){ return Math.abs(a*b)/gcd(a,b); }
    function solveBalance(lhsArr, rhsArr){
      const species = [...lhsArr, ...rhsArr];
      const m = []; const elems = new Set();
      species.forEach(s=> countAtoms(s).forEach((v,k)=> elems.add(k)));
      const elemList = [...elems];
      elemList.forEach(E=>{
        const row = species.map((s,idx)=>{
          const c = countAtoms(s).get(E)||0;
          return idx < lhsArr.length ? c : -c;
        });
        m.push(row);
      });
      const cols = species.length;
      const A = m.map(r=>r.slice());
      A.push(Array(cols).fill(0).map((v,i)=> i===cols-1 ? 1 : 0));
      const b = Array(m.length).fill(0).concat([1]);
      let R = A.map((row,i)=> row.concat([b[i]]));
      const rows = R.length, colsAug = cols+1;
      let r=0;
      for(let c=0;c<cols && r<rows;c++){
        let piv=r;
        for(let i=r;i<rows;i++){ if(Math.abs(R[i][c])>Math.abs(R[piv][c])) piv=i; }
        if(Math.abs(R[piv][c])<1e-9) continue;
        [R[r],R[piv]]=[R[piv],R[r]];
        const div = R[r][c];
        for(let j=c;j<colsAug;j++) R[r][j]/=div;
        for(let i=0;i<rows;i++){
          if(i===r) continue;
          const f = R[i][c];
          for(let j=c;j<colsAug;j++) R[i][j]-=f*R[r][j];
        }
        r++;
      }
      let x = Array(cols).fill(0);
      for(let i=0;i<rows;i++){
        const j = R[i].findIndex(v=>Math.abs(v-1)<1e-9);
        if(j>=0) x[j] = R[i][colsAug-1];
      }
      const denoms = x.map(v=>{
        const s = v.toString(); const m = s.match(/\.(\d+)/);
        return m ? Math.pow(10, m[1].length) : 1;
      });
      const mult = denoms.reduce((acc,d)=> lcm(acc,d),1);
      x = x.map(v=> Math.round(v*mult));
      const g = x.reduce((acc,v)=> gcd(acc,v), x[0]||1);
      x = x.map(v=> v/g);
      return x;
    }
    balanceBtn.addEventListener('click',()=>{
      const raw = (eqIn.value||'').replace('â†’','>').replace('=>','>').replace('->','>').trim();
      if(!raw.includes('>')){ eqOut.textContent='Ù†ØªÛŒØ¬Ù‡: ÙˆØ§Ú©Ù†Ø´ Ø±Ø§ Ø¨Ø§ -> ÙˆØ§Ø±Ø¯ Ú©Ù†.'; eqOut.className='pill bad'; return; }
      const [lhs,rhs] = raw.split('>').map(s=>s.trim());
      const L = parseSideEq(lhs), R = parseSideEq(rhs);
      try{
        const coeffs = solveBalance(L,R);
        const outL = L.map((s,i)=> `${coeffs[i]} ${s}`).join(' + ');
        const outR = R.map((s,i)=> `${coeffs[L.length+i]} ${s}`).join(' + ');
        eqOut.textContent = `Ø¨Ø§Ù„Ø§Ù†Ø³: ${outL} -> ${outR}`;
        eqOut.className = 'pill ok';
        addScore(15);
      }catch(err){
        eqOut.textContent = 'Ù†ØªÙˆØ§Ù†Ø³Øª Ø¨Ø§Ù„Ø§Ù†Ø³ Ú©Ù†Ø¯. ÙˆØ±ÙˆØ¯ÛŒ Ø±Ø§ Ø³Ø§Ø¯Ù‡â€ŒØªØ± Ø¨Ø¯Ù‡ ÛŒØ§ Ù¾Ø±Ø§Ù†ØªØ²Ù‡Ø§ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†.';
        eqOut.className = 'pill bad';
      }
    });

    // Ø³Ø±ÙˆÛŒØ³â€ŒÙˆØ±Ú©Ø± Ø¢ÙÙ„Ø§ÛŒÙ† (Ø¯Ø±ÙˆÙ† Ù‡Ù…ÛŒÙ† ÙØ§ÛŒÙ„ Ø¨Ø§ Blob)
    if('serviceWorker' in navigator){
      const swCode = `
        const CACHE='chemworld-quantum-plus-v1';
        const ASSETS=['./'];
        self.addEventListener('install',e=>{ e.waitUntil(caches.open(CACHE).then(c=>c.addAll(ASSETS))); });
        self.addEventListener('activate',e=>{ e.waitUntil(caches.keys().then(keys=>Promise.all(keys.map(k=>k!==CACHE && caches.delete(k))))); });
        self.addEventListener('fetch',e=>{
          e.respondWith(
            caches.match(e.request).then(res=> res || fetch(e.request).then(r=>{
              const copy=r.clone(); caches.open(CACHE).then(c=>c.put(e.request,copy)); return r;
            }).catch(()=>caches.match('./')))
          );
        });
      `;
      const blob = new Blob([swCode], {type:'text/javascript'});
      const url = URL.createObjectURL(blob);
      navigator.serviceWorker.register(url).catch(()=>{});
    }

    // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ù†ØªØ®Ø§Ø¨ ØªØµØ§Ø¯ÙÛŒ Ù…ØªÙ†
    document.addEventListener('mousedown',e=>{
      if(['BUTTON','SELECT','INPUT','TEXTAREA','A','CANVAS'].includes(e.target.tagName)) return;
      e.preventDefault();
    },{passive:false});

    // Ø§Ù†ØªØ®Ø§Ø¨ Ø§ÙˆÙ„ÛŒÙ‡
    selectEl(elements[0]);
  </script>
</body>
</html>
